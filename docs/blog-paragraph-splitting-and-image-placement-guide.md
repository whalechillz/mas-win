# 📋 블로그 단락 분할 및 이미지 배치 가이드

## 개요

이 문서는 블로그 포스트의 텍스트 단락을 세밀하게 분할하고 이미지를 적절히 배치하는 방법을 설명합니다. 강석 글(ID 123) 최적화 과정에서 개발된 방법론입니다.

---

## 🎯 목표

1. **텍스트 단락 세분화**: 긴 텍스트를 문장 단위로 분리하여 이미지 배치 공간 확보
2. **이미지 균형 배치**: 이미지와 텍스트가 균형있게 배치되어 가독성 향상
3. **이미지/텍스트 비율 최적화**: 권장 비율 0.5-1.0 유지

---

## 📊 권장 비율

### 이미지/텍스트 비율 계산

```
이미지/텍스트 비율 = 이미지 개수 / 텍스트 단락 개수
```

### 비율 가이드라인

- **0.5-1.0**: ✅ 적절한 비율 (권장)
  - 이미지와 텍스트가 균형있게 배치됨
  - 가독성이 좋고 시각적 흥미 유지

- **> 1.5**: ⚠️ 이미지가 너무 많음
  - 텍스트 단락을 더 추가하거나
  - 불필요한 이미지를 제거

- **< 0.3**: ⚠️ 이미지가 너무 적음
  - 관련 이미지를 추가하거나
  - 텍스트를 줄이기

---

## 🔧 사용 스크립트

### 1. 텍스트 단락 개선 스크립트

**파일**: `scripts/improve-paragraph-splitting.js`

**사용법**: `node scripts/improve-paragraph-splitting.js <blogPostId>`

**기능**:
- 텍스트 단락을 문장 단위로 분리
- 마침표, 느낌표, 물음표, 따옴표 닫기를 기준으로 분리
- 각 문장을 별도 단락으로 분리하여 이미지 배치 공간 확보

**예시**:
```
Before:
강석님께서 스윙한 드라이버는 마쓰구골프의 시크리트웨폰 모델로, 현재 모델 중 가장 반발력이 높은 제품입니다. 실제 시타를 해본 그는 타구감과 타구음에 대해 극찬을 아끼지 않았습니다. 나이가 들어가면서 편안한 스윙으로 골프를 즐기고 싶다는 말씀에 맞춰 제품을 추천드렸고, 그의 만족스러운 반응에 저도 뿌듯함을 느꼈습니다.

After:
강석님께서 스윙한 드라이버는 마쓰구골프의 시크리트웨폰 모델로, 현재 모델 중 가장 반발력이 높은 제품입니다.

실제 시타를 해본 그는 타구감과 타구음에 대해 극찬을 아끼지 않았습니다.

나이가 들어가면서 편안한 스윙으로 골프를 즐기고 싶다는 말씀에 맞춰 제품을 추천드렸고, 그의 만족스러운 반응에 저도 뿌듯함을 느꼈습니다.
```

### 2. 이미지 배치 최적화 스크립트

**파일**: `scripts/optimize-image-placement.js`

**사용법**: `node scripts/optimize-image-placement.js <blogPostId>`

**기능**:
- content에서 기존 이미지 추출
- 텍스트 단락과 제목 구분
- 이미지를 텍스트 단락 사이에 적절히 배치
- 제목 다음에도 이미지 배치 가능

**배치 규칙**:
- 첫 번째 텍스트 단락 다음에는 항상 이미지 배치
- 나머지 텍스트 단락에도 이미지가 남아있으면 배치
- 제목 다음에도 이미지 배치 가능
- 남은 이미지는 마지막에 배치

### 3. 누락된 이미지 복구 스크립트

**파일**: `scripts/restore-missing-images-to-content.js`

**사용법**: `node scripts/restore-missing-images-to-content.js <blogPostId>`

**기능**:
- 갤러리 폴더의 이미지 목록 확인
- content에 없는 이미지 찾기 (featured_image 제외)
- 누락된 이미지를 content 끝에 추가

---

## 📋 실행 순서

### Step 1: 현황 분석

```bash
node scripts/analyze-blog-gallery-images.js <blogPostId>
```

**확인 사항**:
- 블로그 글 이미지 개수
- 갤러리 이미지 개수
- 중복 이미지 여부

### Step 2: 누락된 이미지 복구

```bash
node scripts/restore-missing-images-to-content.js <blogPostId>
```

**확인 사항**:
- 갤러리에 있지만 content에 없는 이미지 복구
- featured_image는 제외

### Step 3: 텍스트 단락 개선

```bash
node scripts/improve-paragraph-splitting.js <blogPostId>
```

**확인 사항**:
- 텍스트 단락이 문장 단위로 분리되었는지
- 각 문장이 별도 단락으로 분리되었는지

### Step 4: 이미지 배치 최적화

```bash
node scripts/optimize-image-placement.js <blogPostId>
```

**확인 사항**:
- 이미지가 텍스트 단락 사이에 배치되었는지
- 이미지/텍스트 비율이 적절한지 (0.5-1.0)

### Step 5: 최종 검증

```bash
node scripts/analyze-blog-gallery-images.js <blogPostId>
```

**확인 사항**:
- 블로그 글 이미지 개수 = 갤러리 이미지 개수
- 이미지/텍스트 비율이 적절한지
- 이미지가 글 중간중간에 배치되었는지

---

## 📝 강석 글(ID 123) 최적화 결과

### Before (최적화 전)

- **텍스트 단락**: 4개
- **이미지**: 7개
- **이미지/텍스트 비율**: 1.75 ⚠️ (이미지가 너무 많음)
- **문제점**: 이미지가 마지막에 몰려있음

### After (최적화 후)

- **텍스트 단락**: 11개 (문장 단위로 분리)
- **이미지**: 7개
- **이미지/텍스트 비율**: 0.64 ✅ (적절)
- **개선 사항**: 이미지가 글 중간중간에 적절히 배치됨

### 최종 단락 구조

```
1. [제목] # 강석과 함께한 마쓰구골프 시타 체험...
2. [텍스트] MBC 표준FM의 싱글벙글쇼 남자 MC 강석님을 알고 계신가요?...
3. [이미지] ![골프 시타 현장](...)
4. [제목] ## 강석의 골프 시타 경험
5. [이미지] ![골프 스윙](...)
6. [텍스트] 강석님께서 스윙한 드라이버는...
7. [텍스트] 실제 시타를 해본 그는...
8. [텍스트] 나이가 들어가면서...
9. [이미지] ![골프 체험](...)
10. [제목] ## 편안한 골프를 위한 선택
11. [이미지] ![골프 이미지](...)
12. [텍스트] 강석님은 "저처럼 이제는..."라고 말씀하셨습니다.
13. [이미지] ![골프 연습](...)
14. [텍스트] 여러분도 편안하게 골프를 즐기고 싶으시다면...
15. [텍스트] 강석님처럼 편안하고 부드러운 스윙을 통해...
16. [텍스트] 골프는 나이에 상관없이 즐길 수 있는 스포츠이며...
17. [이미지] ![골프 체험 후기](...)
18. [이미지] ![골프 시타 현장](...)
```

---

## 💡 주의사항

1. **문장 단위 분리**: 너무 짧은 문장(20자 미만)은 분리하지 않음
2. **제목 유지**: 제목은 그대로 유지하고 텍스트만 분리
3. **이미지 순서**: 이미지의 원래 순서를 최대한 유지
4. **가독성 우선**: 비율이 적절해도 가독성이 떨어지면 조정 필요

---

## 🔄 다른 블로그 포스트에 적용하기

1. **현황 분석**: `node scripts/analyze-blog-gallery-images.js <blogPostId>`
2. **누락된 이미지 복구**: `node scripts/restore-missing-images-to-content.js <blogPostId>`
3. **텍스트 단락 개선**: `node scripts/improve-paragraph-splitting.js <blogPostId>`
4. **이미지 배치 최적화**: `node scripts/optimize-image-placement.js <blogPostId>`
5. **최종 검증**: `node scripts/analyze-blog-gallery-images.js <blogPostId>`

---

## 📚 관련 문서

- [블로그 포스트 최적화 가이드](./blog-post-optimization-guide.md)
- [블로그 이미지 마이그레이션 및 정리 계획](./blog-image-migration-and-cleanup-plan.md)

---

**작성일**: 2025-11-29  
**최종 수정일**: 2025-11-29  
**작성자**: AI Assistant

