# 고객 스토리 관리 – 장면 이미지 → 미할당 제외 기능 수정 계획서

**작성일**: 2026-01-29  
**대상**: 고객 관리 > 고객 스토리 관리 모달 (장면 1~7에 할당된 이미지를 미할당으로 빼는 UI)

---

## 1. 현황

### 1.1 기능 존재 여부

| 항목 | 상태 | 비고 |
|------|------|------|
| 장면 → 미할당 이동 **기능** | ✅ **있음** | `handleRemoveFromScene` → API `update-image-scene` (storyScene: null) |
| 장면 이미지 카드에 **제거 버튼** | ✅ **있음** | `SceneDetailView.tsx` 사진 탭 내 각 카드에 "제거 버튼" 존재 |

- **API**: `PATCH /api/admin/update-image-scene` 에서 `storyScene: null` 로 요청 시 해당 이미지를 미할당으로 변경.
- **모달**: `CustomerStoryModal` 에서 `handleRemoveFromScene` 호출 시 `updateImageScene(imageId, null)` 후 `loadCustomerImages()` 로 목록 갱신.
- **뷰**: `SceneDetailView` 에서 `onRemoveFromScene` prop 으로 위 핸들러를 받아, **사진(2)** 탭의 각 이미지 카드에 **제거 버튼**을 렌더링하고 클릭 시 `handleRemoveFromScene(img.id, imageUrl)` 호출.

### 1.2 현재 제거 버튼 UI

| 항목 | 현재 값 | 비고 |
|------|---------|------|
| 위치 | **왼쪽 상단** (`top-2 left-2`) | 사용자 기대(우측 상단)와 다름 |
| 표시 | **호버 시에만** (`opacity-0 hover:opacity-100`) | 평소에는 보이지 않아 발견하기 어려움 |
| 형태 | 빨간 원 + **×** 기호 | "제외" 라벨 없음 |
| 툴팁 | `title="장면에서 제거"` | 있음 |

---

## 2. 사용자 질문에 대한 답변

- **"장면 1~7에 들어간 이미지를 미할당 이미지로 빼는 기능은 없어?"**  
  → **있습니다.** 장면에 할당된 이미지 카드에서 제거 버튼을 누르면 확인 후 미할당으로 이동합니다.
- **"이미지 우측 상단에 제외 버튼 같은 거 만든 것이 있나?"**  
  → **만들어 두었지만**, 현재는 **왼쪽 상단**에 두었고, **마우스를 올려야만** 보이므로 눈에 잘 띄지 않을 수 있습니다.

---

## 3. 수정 방향 (발견성·일관성 개선)

1. **위치**  
   - 제거 버튼을 **우측 상단** (`top-2 right-2`) 으로 이동.  
   - "제외" 는 보통 우측 상단에 두는 패턴과 맞추고, 동영상/서류 배지와 겹치지 않도록 레이어(z-index) 또는 배지 배치를 조정.

2. **표시**  
   - **카드 호버 시** 버튼이 보이도록 유지하되, 필요 시 `opacity` 를 조정해 조금 더 잘 보이게 하거나,  
   - 또는 **항상 표시** (반투명) 로 변경해 "제외 가능한 버튼이 있다" 는 것을 인지하기 쉽게 함.

3. **라벨**  
   - 버튼에 **"제외"** 텍스트를 추가하거나, 아이콘(×) + 툴팁 "미할당으로 제외" 로 의미를 명확히 함.

4. **배지와의 겹침**  
   - 동영상/서류 배지가 `top-2 right-2` 에 있으므로, 제외 버튼을 우측 상단으로 옮길 때  
     - 제외 버튼을 **맨 오른쪽**에 두고, 동영상/서류 배지는 그 왼쪽으로 배치하거나,  
     - 제외 버튼만 우측 상단, 배지는 우측 **중단** 등으로 위치를 달리하여 겹치지 않게 함.

---

## 4. 변경 파일 및 수정 내용

| 파일 | 수정 내용 |
|------|-----------|
| `components/admin/customers/SceneDetailView.tsx` | ① 제거 버튼 위치를 `left-2` → `right-2` 로 변경. ② 버튼에 "제외" 라벨 추가 또는 아이콘+툴팁 정리. ③ 동영상/서류 배지와 겹치지 않도록 배치 조정(예: 제외 버튼 우측 끝, 배지는 그 왼쪽). ④ 필요 시 `opacity` 조정으로 발견성 개선. |

---

## 5. 체크리스트

- [x] 장면 → 미할당 기능 및 제거 버튼 존재 여부 확인
- [x] 현재 버튼 위치·표시 방식 문서화
- [x] 제거 버튼을 우측 상단으로 이동 (`right-2`)
- [x] "제외" 라벨 및 툴팁("이 이미지를 장면에서 제거하고 미할당으로 이동") 적용
- [x] 동영상/서류 배지를 `right-12` 로 옮겨 제외 버튼과 겹치지 않도록 조정

---

## 6. 요약

| 항목 | 내용 |
|------|------|
| 기능 | 장면 1~7 이미지 → 미할당 이동 기능 **이미 구현됨** (API·모달·뷰 연동 완료) |
| 버튼 | 제거 버튼 **있음**. 현재 **왼쪽 상단**, **호버 시에만** 표시, × 기호만 사용 |
| 개선 | 우측 상단으로 이동, "제외" 라벨 또는 툴팁 추가, 배지와 겹치지 않게 배치, 발견성 개선 |
