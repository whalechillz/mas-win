# 블로그 이미지 분석 결과 해석 가이드

## 분석 결과 항목 설명

### 📊 기본 통계

1. **총 블로그 글**: 분석 대상이 된 전체 블로그 글 수
2. **고유 이미지 URL**: 중복 제거된 고유한 이미지 URL 개수
   - `featured_image`와 `content`에서 추출한 모든 이미지 URL
   - 같은 URL이 여러 글에서 사용되어도 1개로 카운트
3. **처리된 이미지**: 실제로 Storage에서 검색한 이미지 개수
   - 경로 추출 성공한 이미지만 처리
4. **Storage에서 찾음**: Storage에서 실제로 존재 확인된 이미지 개수
5. **Storage에서 못 찾음**: 경로는 추출되었지만 Storage에 없는 이미지 개수

### 🌐 외부 URL 및 경로 추출 실패

6. **외부 URL**: Supabase Storage가 아닌 다른 도메인의 이미지
   - 예: `https://example.com/image.jpg`
   - 예: `https://cdn.example.com/image.jpg`
7. **경로 추출 실패**: URL 패턴이 예상과 다른 경우
   - 지원되지 않는 URL 형식
   - 상대 경로만 있는 경우 (예: `/images/photo.jpg`)

### 🔄 중복 및 연결

8. **중복 이미지 그룹**: 파일명이 같은 이미지 그룹 수
9. **연결되지 않은 이미지**: Storage에는 있지만 블로그에 연결되지 않은 이미지

---

## 결과 해석 예시

### 예시 1: 정상적인 경우
```
총 블로그 글: 160개
고유 이미지 URL: 507개
처리된 이미지: 507개
Storage에서 찾음: 490개
Storage에서 못 찾음: 10개
외부 URL: 7개
```

**해석**:
- ✅ **490개 찾음**: 대부분의 이미지가 Storage에 정상적으로 존재
- ⚠️ **10개 못 찾음**: Storage에서 삭제되었거나 경로가 변경된 이미지
- 🌐 **7개 외부 URL**: 외부 호스팅 이미지 (정상)

### 예시 2: 문제가 있는 경우
```
총 블로그 글: 160개
고유 이미지 URL: 507개
처리된 이미지: 100개
Storage에서 찾음: 50개
Storage에서 못 찾음: 50개
```

**해석**:
- ⚠️ **100개만 처리됨**: 타임아웃으로 일부만 처리됨 (Vercel 10초 제한)
- ⚠️ **50개 못 찾음**: 많은 이미지가 Storage에 없음

---

## 처리되지 않은 이미지

**처리되지 않은 이미지** = 고유 이미지 URL - 처리된 이미지

이 경우:
- 타임아웃으로 인해 일부 이미지가 처리되지 않음
- 전체 처리하려면 여러 번 실행하거나 특정 블로그 글만 분석해야 함

---

## 개선 사항

### 현재 구현
- ✅ 전체 이미지 처리 시도 (타임아웃 방지)
- ✅ HEAD 요청 타임아웃: 2초
- ✅ 배치 크기: 100개
- ✅ 전체 실행 시간 제한: 8초

### 타임아웃 발생 시
- 처리된 결과까지만 반환
- `totalImagesNotProcessed` 필드로 미처리 개수 확인 가능
- 여러 번 실행하여 전체 처리 가능

---

## 참고

- **Vercel 제한**: 서버리스 함수는 10초 제한
- **배치 처리**: 100개씩 병렬 처리로 시간 단축
- **HEAD 요청**: 각 이미지 존재 확인에 약 0.5-2초 소요

