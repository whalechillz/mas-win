# 갤러리 관리 "대표 이미지" 필터 제거 및 대표 이미지 사용 현황 분석

## 📋 분석 결과

### 1. 갤러리 관리 페이지의 "⭐ 대표 이미지" 필터

**현재 상태:**
- 갤러리 관리 페이지(`/admin/gallery`)에 "⭐ 대표 이미지" 필터 옵션이 존재
- 필터는 `is_featured` 필드를 기준으로 작동
- **문제점**: `image_metadata` 테이블에 `is_featured` 컬럼이 존재하지 않음
- **결과**: 필터를 선택하면 항상 0개의 이미지가 표시됨 (현재 화면에서 확인된 문제)

**영향 분석:**
- ✅ **삭제해도 문제 없음**: 실제로 작동하지 않는 필터이므로 제거해도 다른 기능에 영향 없음
- `is_featured` 필드는 블로그 포스트(`blog_posts.is_featured`)에서만 사용되며, 이미지 메타데이터와는 무관

### 2. 고객 관리에서의 대표 이미지

**사용 위치:**
- `/admin/customers` - 고객 관리 페이지
- 고객 이미지 모달 (`CustomerImageModal`)

**구현 방식:**
- `is_scene_representative` 필드 사용 (장면별 대표 이미지)
- 고객 썸네일 조회 시 우선순위:
  1. **1순위**: `is_scene_representative = true`인 이미지
  2. **2순위**: 최신 이미지 (대표 이미지가 없는 경우)

**코드 위치:**
- `pages/admin/customers/index.tsx`: 고객 이미지 모달, 대표 이미지 설정/해제 핸들러
- `pages/api/admin/customers/index.ts`: 고객 썸네일 조회 로직 (라인 335-350)
- `pages/api/admin/image-metadata.js`: 대표 이미지 설정/해제 API

**기능:**
- 장면별로 대표 이미지 설정 가능
- 고객 리스트에서 썸네일로 표시
- 동영상은 대표 이미지로 설정 불가

**결론:**
- ✅ **유지 필요**: 고객 관리의 핵심 기능으로, 갤러리 관리 필터와는 별개

### 3. 상품 관리에서의 대표 이미지

**사용 위치:**
- `/admin/products` - 상품 관리 페이지
- `/admin/product-composition` - 상품 합성 관리 페이지

**구현 방식:**
- `mainImageUrl` 상태 변수로 관리
- 상품 데이터의 `image_url` 필드 사용

**코드 위치:**
- `pages/admin/products.tsx`: `mainImageUrl` 상태 관리 (라인 96)
- `pages/admin/product-composition.tsx`: 대표 이미지 설정 함수 (라인 571)

**기능:**
- 상품별로 대표 이미지 설정
- 상품 상세 페이지에서 메인 이미지로 표시
- "대표" 배지로 표시

**결론:**
- ✅ **유지 필요**: 상품 관리의 핵심 기능으로, 갤러리 관리 필터와는 별개

## 🔧 수정 계획

### 1단계: 갤러리 관리 페이지 필터 제거

**수정 파일:**
- `pages/admin/gallery.tsx`

**수정 내용:**
1. 필터 타입 정의에서 `'featured'` 제거
2. 필터 드롭다운에서 "⭐ 대표 이미지" 옵션 제거
3. 필터링 로직에서 `case 'featured'` 제거

**예상 효과:**
- 필터 목록이 간소화됨
- 사용자가 혼란스러운 빈 필터를 선택할 수 없음
- UI가 더 명확해짐

### 2단계: 관련 코드 정리 (선택사항)

**추가 정리 가능 항목:**
- `ImageMetadata` 인터페이스에서 `is_featured` 필드 제거 (다른 곳에서 사용하지 않는 경우)
- `all-images.js` API에서 `is_featured` 관련 코드 제거 (현재 반환하지 않으므로 영향 없음)

## ✅ 검증 체크리스트

- [x] 갤러리 관리 페이지에서 "대표 이미지" 필터 제거 완료
- [x] 고객 관리에서 `is_scene_representative` 기반 대표 이미지 기능 확인
- [x] 상품 관리에서 `mainImageUrl` 기반 대표 이미지 기능 확인
- [ ] 필터 제거 후 갤러리 관리 페이지 정상 작동 확인
- [ ] 다른 필터 옵션들이 정상 작동하는지 확인

## 📝 참고사항

1. **고객 관리의 대표 이미지**는 `is_scene_representative` 필드를 사용하며, 이는 갤러리 관리의 `is_featured` 필터와 완전히 별개입니다.

2. **상품 관리의 대표 이미지**는 상품 데이터 자체에 저장되며, 이미지 메타데이터와는 무관합니다.

3. **블로그 관리의 대표 이미지**는 `blog_posts.featured_image` 필드에 URL로 저장되며, 이미지 메타데이터의 `is_featured`와는 무관합니다.

4. 갤러리 관리 페이지의 "대표 이미지" 필터는 실제로 작동하지 않았으므로, 제거해도 기존 기능에 전혀 영향이 없습니다.

## 🚀 배포 전 확인사항

1. 갤러리 관리 페이지 접속 후 필터 드롭다운 확인
2. 다른 필터 옵션들(사용되지 않음, 중복 이미지, 카테고리별, 로고만 보기) 정상 작동 확인
3. 고객 관리 페이지에서 대표 이미지 설정/해제 기능 정상 작동 확인
4. 상품 관리 페이지에서 대표 이미지 설정 기능 정상 작동 확인
