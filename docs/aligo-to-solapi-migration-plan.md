# 알리고 → 솔라피 마이그레이션 계획서

## 📋 문서 정보
- **작성일**: 2025-11-27
- **상태**: 진행 중
- **우선순위**: 높음
- **목적**: 알리고 카카오톡 템플릿을 솔라피로 완전 마이그레이션

---

## 1. 마이그레이션 배경

### 현재 상황
- **기존 시스템**: 알리고(Aligo) 카카오톡 알림톡 사용
- **신규 시스템**: 솔라피(Solapi) 카카오톡 알림톡으로 전환
- **이유**: 솔라피 통합 관리 및 SMS/카카오톡 통합 운영

### 주요 변경사항
- **URL 변경**: `https://www.mas9golf.com/contact` → `https://www.masgolf.co.kr/contact`
- **플랫폼 변경**: 알리고 → 솔라피
- **템플릿 코드 변경**: 알리고 형식 → 솔라피 형식

---

## 2. 알리고 템플릿 현황

### 확인된 알리고 템플릿 목록

| 템플릿 코드 | 템플릿명 | 상태 | 대체문자 | 비고 |
|-----------|---------|------|---------|------|
| TV_5950 | 시타예약최신 | 승인완료 | 발송 | 예약 확정 안내 (버튼 포함) |
| TI_9794 | 예약 접수 확인 | 승인완료 | 발송 | 예약 접수 확인 |
| TW_8855 | 마쓰구 리펀드(최신) | 승인완료 | 발송 | 환불 안내 |
| TV_5953 | 시타사이트&약도안내 최신 | 승인완료 | 발송 | 약도 안내 |
| TP_6093 | 무게추 사용방법(최신) | 승인완료 | 발송 | 사용법 안내 |
| TI_8967 | 기본안내 | 승인완료 | 발송 | 기본 안내 |
| TL_5495 | [AS] 발송완료 | 승인완료 | 발송 | AS 완료 안내 |
| TI_5475 | 주문확인 | 승인완료 | 발송 | 주문 확인 |
| TY_1512 | 시타채 대여안내 수정 | 승인완료 | 발송안함 | 대여 안내 |
| TI_5504 | 일시품절 - 발송완료 | 승인완료 | 발송 | 품절 안내 |
| TI_5507 | 인플루언스 | 승인완료 | 발송 | 인플루언스 안내 |
| TI_5512 | 교환/반품 불가 | 승인완료 | 발송 | 교환/반품 안내 |
| TK_4033 | 교환/반품 안내 | 승인완료 | 발송 | 교환/반품 안내 |
| TL_9690 | 워런티 방문예약2023 | 승인완료 | 발송 | 워런티 예약 |
| T_8973 | 일시품절안내 | 승인완료 | 발송 | 품절 안내 |
| TL_9704 | 일시품절안내2023 | 승인완료 | 발송 | 품절 안내 |
| TJ_4442 | 입금확인NEW | 승인완료 | 발송 | 입금 확인 |

---

## 3. 템플릿 마이그레이션 체크리스트

### 전체 템플릿 마이그레이션 현황

| 순번 | 템플릿명 | 알리고 코드 | 완료 여부 | 기존 알리고 내용 (간략) | 솔라피 변경 사항 (간략) |
|:---:|---------|-----------|:--------:|---------------------|---------------------|
| 1 | 예약 접수 확인 | TI_9794 | ✅ 등록완료 | 예약 접수 확인 메시지 | 인사말 형식 통일, 섹션 구조화 |
| 2 | 예약 확정 안내 (시니어) | - | ✅ 등록완료 | 예약 확정 안내 | 인사말 형식 통일, 섹션 구조화, 버튼 추가 |
| 3 | 예약 확정 안내 (하이테크) | - | ✅ 등록완료 | 예약 확정 안내 (하이테크용) | 인사말 "마쓰구 (MASSGOO)"로 변경, 섹션 구조화 |
| 4 | 기본안내 | TI_8967 | ⏳ 등록대기 | "안녕하세요. #{고객명} 고객님!" 형식 | 인사말 통일, [제품 정보] 섹션 추가, URL 변경 |
| 5 | 시타사이트&약도안내 최신 | TV_5953 | ⏳ 등록대기 | "안녕하세요, #{고객명} 고객님!" 형식 | 인사말 통일, [안내사항] 섹션 추가, 버튼 2개 (예약+약도) |
| 6 | 당일시타예약최신 | TBD | ⏳ 등록대기 | "친애하는 #{고객명} 고객님" 형식 | 인사말 통일, [예약 정보]/[안내사항] 섹션 추가 |
| 7 | 무게추 사용방법 | TP_6093 | ⏳ 미등록 | 사용법 안내 | 내용 확인 필요 |
| 8 | [AS] 발송완료 | TL_5495 | ⏳ 미등록 | AS 완료 안내 | 내용 확인 필요 |
| 9 | 주문확인 | TI_5475 | ⏳ 미등록 | 주문 확인 안내 | 내용 확인 필요 |
| 10 | 입금확인 | TJ_4442 | ⏳ 미등록 | 입금 확인 안내 | 내용 확인 필요 |
| 11 | 일시품절 안내 | TI_5504, T_8973, TL_9704 | ⏳ 미등록 | 품절 안내 | 내용 확인 필요 |
| 12 | 교환/반품 안내 | TK_4033, TI_5512 | ⏳ 미등록 | 교환/반품 안내 | 내용 확인 필요 |
| 13 | 마쓰구 리펀드 | TW_8855 | ⏳ 미등록 | 환불 안내 | 내용 확인 필요 |
| 14 | 워런티 방문예약 | TL_9690 | ⏳ 미등록 | 워런티 예약 안내 | 내용 확인 필요 |
| 15 | 시타채 대여안내 | TY_1512 | ⏳ 미등록 | 대여 안내 | 내용 확인 필요 |

**범례:**
- ✅ 등록완료: 솔라피에 등록 완료 (검수 진행 중 또는 승인 완료)
- ⏳ 등록대기: 내용 확인 완료, 솔라피 등록 대기
- ⏳ 미등록: 내용 확인 필요, 등록 대기

### 주요 변경 사항 요약

1. **인사말 형식 통일**: 모든 템플릿을 `#{고객명}님, 안녕하세요! 마쓰구골프입니다.` 형식으로 통일
2. **섹션 구조화**: `[예약 정보]`, `[안내사항]`, `[제품 정보]` 등 명확한 섹션 구분
3. **기호 통일**: `▶` (정보), `⊙` (안내사항) 기호 일관성 유지
4. **URL 변경**: `mas9golf.com` → `masgolf.co.kr` 도메인 변경
5. **버튼 명확화**: 버튼 이름을 더 직관적이고 명확하게 변경

---

## 4. 솔라피 템플릿 등록 현황

### ✅ 등록 완료 (3개)
1. **예약 접수 확인 (공통)**
   - 템플릿 이름: `예약 접수 확인 (시니어)`
   - 템플릿 코드: `m3A9EGCj2y` (검수진행중)
   - 버튼: MASSGOO 홈페이지 (외부 브라우저)
   - 사용: 시니어/하이테크 공통 사용

2. **예약 확정 안내 (시니어)**
   - 템플릿 이름: `예약 확정 안내(시니어)N`
   - 템플릿 코드: `TBD` (검수진행중)
   - 버튼: 찾아오시는 길 안내 (외부 브라우저)

3. **예약 확정 안내 (하이테크)**
   - 템플릿 이름: `예약 확정 안내 (하이테크)N`
   - 템플릿 코드: `TBD` (검수진행중)
   - 버튼: 찾아오시는 길 안내 (외부 브라우저)

### ⏳ 등록 필요 (우선순위 순)
- **기본안내** (TI_8967) - 🔴 우선 등록 필요 (내용 확인 완료)
- **시타사이트&약도안내** (TV_5953) - 🔴 우선 등록 필요 (내용 확인 완료)
- **당일시타예약최신** - 🔴 우선 등록 필요 (내용 확인 완료)
- 무게추 사용방법 (TP_6093)
- [AS] 발송완료 (TL_5495)
- 주문확인 (TI_5475)
- 입금확인 (TJ_4442)
- 일시품절 안내 (TI_5504, T_8973, TL_9704)
- 교환/반품 안내 (TK_4033, TI_5512)
- 마쓰구 리펀드 (TW_8855)
- 워런티 방문예약 (TL_9690)
- 시타채 대여안내 (TY_1512)

---

## 5. 마이그레이션 우선순위

### 🔴 Phase 1: 예약 관련 템플릿 (즉시)
1. ✅ 예약 접수 확인 (`m3A9EGCj2y`) - 등록 완료
2. ⚠️ 예약 확정 안내 (`2LTydmPnZX`) - 버튼 추가 필요
3. ⏳ 시타예약최신 (버튼 포함) - 재등록 필요

### 🟡 Phase 2: 주문/배송 관련 템플릿 (1주일 내)
4. 주문확인
5. 입금확인
6. 일시품절 안내
7. 발송완료

### 🟢 Phase 3: 기타 템플릿 (2주일 내)
8. **기본안내** (TI_8967) - 🔴 우선 등록 (내용 확인 완료)
9. **시타사이트&약도안내** (TV_5953) - 🔴 우선 등록 (내용 확인 완료)
10. **당일시타예약최신** - 🔴 우선 등록 (내용 확인 완료)
11. 무게추 사용방법 (TP_6093)
11. [AS] 발송완료 (TL_5495)
12. 교환/반품 안내
13. 마쓰구 리펀드
14. 워런티 방문예약
15. 시타채 대여안내

---

## 6. 템플릿 재등록 가이드

### 5-1. 예약 확정 안내 템플릿 (버튼 포함)

**템플릿 이름**: 예약 확정 안내 (약도 버튼)

**템플릿 내용**:
```
[마쓰구골프] 안녕하세요, #{고객명}님!

시타 예약이 확정되었습니다.
예약하신 일시에 방문해 주시기 바랍니다.

📅 예약일시: #{날짜} #{시간}
🏌️ 서비스: #{서비스명}
📍 장소: 마쓰구 스튜디오

☎ 마쓰구 수원본점
수원시 영통구 법조로149번길 200
TEL 031-215-0013
OPEN 09:00~18:00(월~금)
```

**버튼 설정**:
- **버튼 유형**: 웹 링크 (WL)
- **버튼 이름**: 찾아오시는 길 안내 >
- **모바일 웹 링크**: `https://www.masgolf.co.kr/contact`
- **PC 웹 링크**: `https://www.masgolf.co.kr/contact`

**변수**:
- `#{고객명}`
- `#{날짜}`
- `#{시간}`
- `#{서비스명}`

**검수자 참고 의견**:
```
시타 예약 확정 시 고객에게 예약 확정 안내 및 약도 페이지 링크를 제공하는 템플릿입니다.
```

### 5-2. 기본안내 템플릿 (TI_8967) - 🔴 우선 등록

**템플릿 이름**: 기본안내

**알리고 템플릿 정보**:
- **템플릿 코드**: TI_8967
- **상태**: 승인완료
- **대체문자**: 발송
- **순번**: 4

**기존 알리고 내용 (간략)**:
```
안녕하세요. #{고객명} 고객님!
마쓰구골프 입니다.
요청하신 마쓰구 고반발 드라이버 상세정보입니다.
▶ 내용: #{내용}
```

**솔라피 변경 사항 (간략)**:
- 인사말 형식 통일: `#{고객명}님, 안녕하세요! 마쓰구골프입니다.`
- 섹션 구조화: `[제품 정보]` 섹션 추가
- URL 변경: `mas9golf.com` → `masgolf.co.kr`

**템플릿 내용 (본문)**:
```
#{고객명}님, 안녕하세요! 마쓰구골프입니다.

요청하신 마쓰구 고반발 드라이버 상세정보입니다.

[제품 정보]
• 내용: #{내용}
```

**부가정보 (선택사항)**:
```
☎ 마쓰구 수원본점
MASGOLF Suwon Main Branch
수원시 영통구 법조로149번길 200
TEL 031-215-0013
(무료) 080-028-8888 비거리 상담
(OPEN) 09:00~18:00(월~금)
```

**디자인 가이드라인**:
- ☎ 이모지는 부가정보에만 1회 사용 (검수 통과 확인됨)
- ▶ 대신 • (불릿) 사용 (더 안전하고 일관성 있음)
- 섹션 구분은 [ ] 사용
- 회사 정보는 부가정보(선택사항)에 배치 (일관성 및 관리 용이성)

**버튼 설정**:
- **버튼 유형**: 웹 링크 (WL)
- **버튼 이름**: 마쓰구 공식 홈페이지 >
- **모바일 웹 링크**: `https://www.masgolf.co.kr/`
- **PC 웹 링크**: `https://www.masgolf.co.kr/`

**변수**:
- `#{고객명}`
- `#{내용}`

**검수자 참고 의견**:
```
고객이 요청한 제품 상세정보를 안내하는 기본 템플릿입니다.
고반발 드라이버 등 제품 정보를 제공할 때 사용합니다.
```

**개선 사항**:
1. **URL 변경**: 
   - 기존: `https://www.mas9golf.com/*`
   - 신규: `https://www.masgolf.co.kr/*`

2. **버튼명**: "마쓰구 공식 홈페이지 >"로 명확하게 표시

3. **내용**: 최신 정보 반영 완료

---

### 5-3. 시타사이트&약도안내 최신 템플릿 (TV_5953)

**템플릿 이름**: 시타사이트&약도안내 최신

**알리고 템플릿 정보**:
- **템플릿 코드**: TV_5953
- **상태**: 승인완료
- **대체문자**: 발송
- **순번**: 5

**기존 알리고 내용 (간략)**:
```
안녕하세요, #{고객명} 고객님!
마쓰구골프입니다.
요청하신 고반발 드라이버 시타 예약과 관련하여...
```

**솔라피 변경 사항 (간략)**:
- 인사말 형식 통일: `#{고객명}님, 안녕하세요! 마쓰구골프입니다.`
- 섹션 구조화: `[안내사항]` 섹션 추가, `⊙` 기호 사용
- 버튼 2개 추가: "지금 시타 예약하기 >", "찾아오시는 길 안내 >"

**템플릿 내용 (본문)**:
```
#{고객명}님, 안녕하세요! 마쓰구골프입니다.

요청하신 고반발 드라이버 시타 예약과 관련하여 마쓰구 수원 본점 방문 안내를 드립니다. 고객님께서 편하게 방문하실 수 있도록 최선을 다해 준비하겠습니다.

[안내사항]
• 궁금하신 사항이 있으시면 언제든지 연락 주세요.
• 예약 일정 변경이 필요하시면 사전에 연락 부탁드립니다.
```

**부가정보 (선택사항)**:
```
☎ 마쓰구 수원본점
MASGOLF Suwon Main Branch
수원시 영통구 법조로149번길 200
TEL 031-215-0013
(무료) 080-028-8888 비거리 상담
(OPEN) 09:00~18:00(월~금)
```

**디자인 가이드라인**:
- ⊙ 대신 • (불릿) 사용 (더 안전하고 일관성 있음)
- ☎ 이모지는 부가정보에만 1회 사용
- 회사 정보는 부가정보에 배치 (일관성)

**버튼 설정**:
- **버튼 1 유형**: 웹 링크 (WL)
- **버튼 1 이름**: 지금 시타 예약하기 >
- **모바일 웹 링크**: `https://www.masgolf.co.kr/booking`
- **PC 웹 링크**: `https://www.masgolf.co.kr/booking`

- **버튼 2 유형**: 웹 링크 (WL)
- **버튼 2 이름**: 찾아오시는 길 안내 >
- **모바일 웹 링크**: `https://www.masgolf.co.kr/contact`
- **PC 웹 링크**: `https://www.masgolf.co.kr/contact`

**변수**:
- `#{고객명}`

**검수자 참고 의견**:
```
고객이 시타 예약을 요청했을 때 방문 안내 및 약도를 제공하는 템플릿입니다.
시타 예약 페이지와 약도 페이지 링크를 제공합니다.
```

---

### 5-4. 당일시타예약최신 템플릿

**템플릿 이름**: 당일시타예약최신

**알리고 템플릿 정보**:
- **템플릿 코드**: TBD (알리고에서 확인 필요)
- **상태**: 승인완료
- **대체문자**: 발송
- **순번**: 6

**기존 알리고 내용 (간략)**:
```
친애하는 #{고객명} 고객님, 안녕하세요! 마쓰구골프입니다.
오늘은 고객님의 고반발 드라이버 시타 서비스 예약일입니다.
▶ 예약시간: #{예약시간}
```

**솔라피 변경 사항 (간략)**:
- 인사말 형식 통일: `#{고객명}님, 안녕하세요! 마쓰구골프입니다.`
- 섹션 구조화: `[예약 정보]`, `[안내사항]` 섹션 추가
- 안내사항 구조화: `⊙` 기호로 명확한 안내사항 구분

**템플릿 내용 (본문)**:
```
#{고객명}님, 안녕하세요! 마쓰구골프입니다.

오늘은 고객님의 고반발 드라이버 시타 서비스 예약일입니다. 고객님만을 위해 특별히 준비한 맞춤형 분석과 시타 체험을 통해 최상의 경험을 선사해 드리겠습니다.

[예약 정보]
• 예약시간: #{예약시간}

[안내사항]
• 일정 조정이 필요하시다면 언제든지 편하게 연락 주세요.
• 고객님의 편의를 위해 최선을 다하겠습니다.
```

**부가정보 (선택사항)**:
```
☎ 마쓰구 수원본점
MASGOLF Suwon Main Branch
수원시 영통구 법조로149번길 200
TEL 031-215-0013
(무료) 080-028-8888 비거리 상담
(OPEN) 09:00~18:00(월~금)
```

**디자인 가이드라인**:
- ▶, ⊙ 대신 • (불릿) 사용 (일관성 및 검수 안전성)
- ☎ 이모지는 부가정보에만 1회 사용
- 회사 정보는 부가정보에 배치 (일관성)

**버튼 설정**:
- **버튼 유형**: 웹 링크 (WL)
- **버튼 이름**: 찾아오시는 길 안내 >
- **모바일 웹 링크**: `https://www.masgolf.co.kr/contact`
- **PC 웹 링크**: `https://www.masgolf.co.kr/contact`

**변수**:
- `#{고객명}`
- `#{예약시간}`

**검수자 참고 의견**:
```
당일 시타 예약일을 고객에게 알리는 리마인더 템플릿입니다.
예약 시간을 명확히 안내하고, 일정 조정이 필요할 경우 연락을 요청합니다.
```

---

### 5-5. 시타예약최신 템플릿 (알리고 형식 참고)

**템플릿 이름**: 시타 예약 안내 (상세)

**템플릿 내용**:
```
친애하는 #{고객명} 고객님, 안녕하세요! 마쓰구골프입니다.

고객님의 특별한 시타 예약을 환영합니다. 마쓰구골프의 최신 고반발 드라이버와 맞춤형 클럽 분석을 통해, 고객님의 골프 실력을 한 단계 더 향상시킬 수 있도록 준비하겠습니다.

[예약 정보]
▶ 예약일: #{예약일}
▶ 시간: #{시간}

[시타 서비스 혜택]
⊙ 정밀 클럽 분석: 기존 사용 클럽을 바탕으로 스윙 특성, 비거리, 구질을 세밀하게 분석하여, 고객님께 최적의 맞춤 클럽을 추천해드립니다.
⊙ 비거리/구질 향상 체크: 현재 비거리와 구질을 고려해 고객님께 맞는 고반발 드라이버를 제안드리고, 성능을 직접 체험해보실 수 있습니다.

[방문 시 참고사항]
⊙ 기존 클럽을 지참해 주시면 보다 정확한 분석과 최적의 추천이 가능합니다.
⊙ 부득이하게 일정 변경이 필요하신 경우, 언제든지 편하게 연락 부탁드립니다.

☎ 마쓰구 수원본점
수원시 영통구 법조로149번길 200
TEL 031-215-0013
OPEN 09:00~18:00(월~금)
```

**버튼 설정**:
- **버튼 유형**: 웹 링크 (WL)
- **버튼 이름**: 찾아오시는 길 안내 >
- **모바일 웹 링크**: `https://www.masgolf.co.kr/contact`
- **PC 웹 링크**: `https://www.masgolf.co.kr/contact`

**변수**:
- `#{고객명}`
- `#{예약일}`
- `#{시간}`

---

## 7. URL 변경 사항

### 변경 전 (알리고)
- **기본 URL**: `https://www.mas9golf.com/contact`
- **사용 위치**: 모든 템플릿의 버튼 링크

### 변경 후 (솔라피)
- **기본 URL**: `https://www.masgolf.co.kr/contact`
- **사용 위치**: 모든 템플릿의 버튼 링크

### 영향 범위
- 모든 카카오톡 템플릿의 버튼 링크
- SMS 메시지 내 링크 (있는 경우)
- 기타 마케팅 메시지 내 링크

---

## 8. 마이그레이션 체크리스트

### Phase 1: 예약 관련 템플릿
- [x] 예약 접수 확인 템플릿 등록 (`m3A9EGCj2y`)
- [ ] 예약 확정 안내 템플릿 재등록 (버튼 추가)
- [ ] 시타예약최신 템플릿 등록 (버튼 포함)
- [ ] 템플릿 검수 완료 대기
- [ ] 코드에 템플릿 코드 반영

### Phase 2: 주문/배송 관련 템플릿
- [ ] 주문확인 템플릿 등록
- [ ] 입금확인 템플릿 등록
- [ ] 일시품절 안내 템플릿 등록
- [ ] 발송완료 템플릿 등록
- [ ] 템플릿 검수 완료 대기

### Phase 3: 기타 템플릿
- [ ] 기본안내 템플릿 등록 (TI_8967) - 🔴 우선 (내용 확인 완료)
- [ ] 시타사이트&약도안내 템플릿 등록 (TV_5953) - 🔴 우선 (내용 확인 완료)
- [ ] 당일시타예약최신 템플릿 등록 - 🔴 우선 (내용 확인 완료)
- [ ] 무게추 사용방법 템플릿 등록 (TP_6093)
- [ ] [AS] 발송완료 템플릿 등록 (TL_5495)
- [ ] 교환/반품 안내 템플릿 등록
- [ ] 마쓰구 리펀드 템플릿 등록
- [ ] 워런티 방문예약 템플릿 등록
- [ ] 시타채 대여안내 템플릿 등록

### Phase 4: 코드 통합
- [ ] 모든 템플릿 코드를 코드에 반영
- [ ] 템플릿 코드 매핑 테이블 생성
- [ ] 알리고 템플릿 코드 → 솔라피 템플릿 코드 매핑
- [ ] 기존 알리고 호출 코드 제거

### Phase 5: 테스트 및 검증
- [ ] 각 템플릿별 테스트 발송
- [ ] 버튼 링크 동작 확인
- [ ] 변수 치환 확인
- [ ] SMS 대체 발송 확인
- [ ] 프로덕션 배포

---

## 9. 템플릿 코드 매핑 테이블

### 예약 관련
| 알리고 코드 | 알리고 템플릿명 | 솔라피 코드 | 솔라피 템플릿명 | 상태 |
|-----------|--------------|-----------|--------------|------|
| TI_9794 | 예약 접수 확인 | `m3A9EGCj2y` | 예약 접수 확인 | 검수진행중 |
| TV_5950 | 시타예약최신 | `2LTydmPnZX` | 예약 확정 안내 | 검수진행중 |
| - | - | `TBD` | 시타 예약 안내 (상세) | 등록 필요 |

### 주문/배송 관련
| 알리고 코드 | 알리고 템플릿명 | 솔라피 코드 | 솔라피 템플릿명 | 상태 |
|-----------|--------------|-----------|--------------|------|
| TI_5475 | 주문확인 | `TBD` | 주문확인 | 등록 필요 |
| TJ_4442 | 입금확인NEW | `TBD` | 입금확인 | 등록 필요 |
| TI_5504 | 일시품절 - 발송완료 | `TBD` | 일시품절 안내 | 등록 필요 |
| - | 발송완료 | `TBD` | 발송완료 | 등록 필요 |

### 기타
| 알리고 코드 | 알리고 템플릿명 | 솔라피 코드 | 솔라피 템플릿명 | 상태 |
|-----------|--------------|-----------|--------------|------|
| TI_8967 | 기본안내 | `TBD` | 기본안내 | 🔴 등록 필요 (우선, 내용 확인 완료) |
| TV_5953 | 시타사이트&약도안내 최신 | `TBD` | 시타사이트&약도안내 | 🔴 등록 필요 (우선, 내용 확인 완료) |
| - | 당일시타예약최신 | `TBD` | 당일시타예약최신 | 🔴 등록 필요 (우선, 내용 확인 완료) |
| TP_6093 | 무게추 사용방법(최신) | `TBD` | 무게추 사용방법 | 등록 필요 |
| TL_5495 | [AS] 발송완료 | `TBD` | [AS] 발송완료 | 등록 필요 |
| TK_4033 | 교환/반품 안내 | `TBD` | 교환/반품 안내 | 등록 필요 |
| TW_8855 | 마쓰구 리펀드(최신) | `TBD` | 마쓰구 리펀드 | 등록 필요 |
| TL_9690 | 워런티 방문예약2023 | `TBD` | 워런티 방문예약 | 등록 필요 |
| TY_1512 | 시타채 대여안내 수정 | `TBD` | 시타채 대여안내 | 등록 필요 |

---

## 10. 코드 변경 사항

### 9-1. 템플릿 코드 상수 정의

**파일**: `pages/api/bookings/notify-customer.ts`

```typescript
// 카카오톡 템플릿 코드
const KAKAO_TEMPLATE_CODES = {
  booking_received: 'm3A9EGCj2y', // 예약 접수 확인
  booking_confirmed: '2LTydmPnZX', // 예약 확정 안내 (버튼 포함)
  booking_confirmed_detailed: 'TBD', // 시타 예약 안내 (상세, 버튼 포함)
  booking_completed: null, // 아직 등록되지 않음 (SMS로 대체)
};
```

### 9-2. 알리고 → 솔라피 매핑 유틸리티

**새 파일**: `utils/template-mapping.ts`

```typescript
// 알리고 템플릿 코드 → 솔라피 템플릿 코드 매핑
export const ALIGO_TO_SOLAPI_TEMPLATE_MAP: Record<string, string> = {
  'TI_9794': 'm3A9EGCj2y', // 예약 접수 확인
  'TV_5950': '2LTydmPnZX', // 예약 확정 안내
  // ... 추가 매핑
};

// 템플릿 코드 변환 함수
export function convertAligoToSolapiTemplate(aligoCode: string): string | null {
  return ALIGO_TO_SOLAPI_TEMPLATE_MAP[aligoCode] || null;
}
```

---

## 11. 실행 계획

### Week 1: Phase 1 완료
1. 예약 확정 안내 템플릿 재등록 (버튼 추가)
2. 시타예약최신 템플릿 등록 (버튼 포함)
3. 템플릿 검수 완료 대기
4. 코드에 템플릿 코드 반영

### Week 2: Phase 2 완료
1. 주문/배송 관련 템플릿 4개 등록
2. 템플릿 검수 완료 대기
3. 코드에 템플릿 코드 반영

### Week 3: Phase 3 완료
1. 기타 템플릿 8개 등록
2. 템플릿 검수 완료 대기
3. 코드에 템플릿 코드 반영

### Week 4: Phase 4 & 5 완료
1. 모든 템플릿 코드 매핑 완료
2. 알리고 호출 코드 제거
3. 테스트 및 검증
4. 프로덕션 배포

---

## 12. 주의사항

### 템플릿 검수 기간
- 카카오톡 템플릿 검수는 보통 **1-3일** 소요
- 검수 완료 전까지는 SMS로 대체 발송
- 검수 실패 시 템플릿 수정 후 재등록 필요

### 버튼 링크 검수
- 버튼 링크는 반드시 **도메인 인증**이 필요
- `masgolf.co.kr` 도메인 인증 확인 필요
- 링크 변경 시 재검수 필요

### URL 변경 영향
- 기존 알리고 템플릿의 링크는 `mas9golf.com` 사용
- 신규 솔라피 템플릿은 `masgolf.co.kr` 사용
- 두 도메인 모두 정상 작동 확인 필요

---

## 13. 참고 자료

- [솔라피 카카오톡 알림톡 가이드](https://developers.solapi.com/references/kakao)
- [카카오 비즈니스 템플릿 가이드](https://kakaobusiness.gitbook.io/main/ad/bizmessage/notice-friend/content-guide)
- [마쓰구골프 약도 페이지](https://www.masgolf.co.kr/contact)

---

**최종 업데이트**: 2025-11-27

