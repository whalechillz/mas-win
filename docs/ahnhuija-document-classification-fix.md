# ì•ˆí¬ì ê³ ê° ì„œë¥˜ ë¶„ë¥˜ ë¬¸ì œ í•´ê²°

## ë¬¸ì œ ë¶„ì„

### í˜„ìƒ
- ê¹€ì§„ê¶Œ ê³ ê°: ì„œë¥˜ ë¶„ë¥˜ê°€ ì •ìƒ ì‘ë™ (ì„œë¥˜ 3ê°œ í‘œì‹œ)
- ì•ˆí¬ì ê³ ê°: ì„œë¥˜ ë¶„ë¥˜ê°€ ì•ˆ ë¨ (ì„œë¥˜ 0ê°œ)

### ì›ì¸
1. **"ìŠ¤í† ë¦¬" ë©”ë‰´ì™€ "ê³ ê° ì´ë¯¸ì§€ ê´€ë¦¬"ëŠ” ê°™ì€ API ì‚¬ìš©**
   - ë‘ ë©”ë‰´ ëª¨ë‘ `/api/admin/upload-customer-image` API ì‚¬ìš©
   - `SceneDetailView`ë„ ê°™ì€ API ì‚¬ìš© (120ì¤„)
   - ë”°ë¼ì„œ "ìŠ¤í† ë¦¬" ë©”ë‰´ë¥¼ ì‚¬ìš©í•´ì„œ ì•ˆ ë‚˜ì˜¤ëŠ” ê²ƒì€ ì•„ë‹˜

2. **ë°ì´í„°ë² ì´ìŠ¤ ë¶„ë¥˜ ë¬¸ì œ**
   - ì•ˆí¬ì ê³ ê°ì˜ ì„œë¥˜ê°€ `image_assets` í…Œì´ë¸”ì—ì„œ `is_scanned_document` ë˜ëŠ” `document_type` í•„ë“œê°€ ì„¤ì •ë˜ì§€ ì•ŠìŒ
   - ê¸°ì¡´ ë°ì´í„° ë¶„ë¥˜ ìŠ¤í¬ë¦½íŠ¸(`classify-existing-scanned-documents.js`)ê°€ ì•ˆí¬ì ê³ ê°ì˜ ì„œë¥˜ë¥¼ ë¶„ë¥˜í•˜ì§€ ëª»í–ˆì„ ê°€ëŠ¥ì„±

## í•´ê²° ë°©ë²•

### 1. ì•ˆí¬ì ê³ ê° ì„œë¥˜ ìˆ˜ë™ ë¶„ë¥˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

**íŒŒì¼**: `scripts/classify-ahnhuija-documents.js`

**ì‹¤í–‰ ë°©ë²•**:
```bash
node scripts/classify-ahnhuija-documents.js
```

**ìŠ¤í¬ë¦½íŠ¸ ê¸°ëŠ¥**:
1. ì•ˆí¬ì ê³ ê° ì°¾ê¸° (ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰)
2. ì•ˆí¬ì ê³ ê°ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì¡°íšŒ
3. íŒŒì¼ëª…ì— "seukaen"ì´ í¬í•¨ëœ íŒŒì¼ ì°¾ê¸°
4. ê° íŒŒì¼ì„ ë¬¸ì„œë¡œ ê°ì§€í•˜ê³  íƒ€ì… ë¶„ë¥˜
5. `image_assets` í…Œì´ë¸” ì—…ë°ì´íŠ¸ (`is_scanned_document`, `document_type`)
6. `scanned_documents` í…Œì´ë¸”ì— ë ˆì½”ë“œ ìƒì„±/ì—…ë°ì´íŠ¸

**ì¶œë ¥ ì˜ˆì‹œ**:
```
ğŸš€ ì•ˆí¬ì ê³ ê° ì„œë¥˜ ë¶„ë¥˜ ì‹œì‘...
========================================
1ï¸âƒ£ ì•ˆí¬ì ê³ ê° ì¡°íšŒ ì¤‘...
âœ… ê³ ê° ì°¾ìŒ: ì•ˆí¬ì (ID: 3665, í´ë”: ahnhuija)
2ï¸âƒ£ ì•ˆí¬ì ê³ ê° ì´ë¯¸ì§€ ì¡°íšŒ ì¤‘...
   ì¡°íšŒ ì¤‘... 33ê°œ
âœ… 33ê°œ ì´ë¯¸ì§€ ì¡°íšŒ ì™„ë£Œ
3ï¸âƒ£ ì„œë¥˜ í›„ë³´ íŒŒì¼ ì°¾ê¸°...
âœ… ì„œë¥˜ í›„ë³´: 2ê°œ
4ï¸âƒ£ ë¬¸ì„œ ë¶„ë¥˜ ì‹œì‘...
   âœ… ë¶„ë¥˜ ì™„ë£Œ: ahnhuija_s1_seukaen-20260126-2_01.webp â†’ order_spec
   âœ… ë¶„ë¥˜ ì™„ë£Œ: ahnhuija_sl_seukaen-20260126-3.01.webp â†’ survey
ğŸ“Š ìµœì¢… í†µê³„:
   ì´ ì„œë¥˜ í›„ë³´: 2ê°œ
   âœ… ìƒˆë¡œ ë¶„ë¥˜: 2ê°œ
   â­ï¸  ê±´ë„ˆëœ€ (ì´ë¯¸ ë¶„ë¥˜ë¨): 0ê°œ
   âŒ ì˜¤ë¥˜: 0ê°œ
```

### 2. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í›„ í™•ì¸

1. **ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸**:
   - "ê³ ê° ì´ë¯¸ì§€ ê´€ë¦¬" ëª¨ë‹¬ ì—´ê¸°
   - "ì„œë¥˜" íƒ­ í´ë¦­
   - ì„œë¥˜ê°€ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸

2. **ì½˜ì†” ë¡œê·¸ í™•ì¸**:
   - ê°œë°œì ë„êµ¬ ì½˜ì†”ì—ì„œ `ğŸ” [ë¯¸ë””ì–´ ë¶„ë¥˜] ê²°ê³¼:` ë¡œê·¸ í™•ì¸
   - `documents: Array(N)` (N > 0)ì¸ì§€ í™•ì¸

## ì¶”ê°€ í™•ì¸ ì‚¬í•­

### ë‹¤ë¥¸ ê³ ê°ë„ ê°™ì€ ë¬¸ì œê°€ ìˆëŠ”ì§€ í™•ì¸

ë§Œì•½ ë‹¤ë¥¸ ê³ ê°ë„ ì„œë¥˜ê°€ ë¶„ë¥˜ë˜ì§€ ì•Šì•˜ë‹¤ë©´, ì „ì²´ ë°ì´í„° ë¶„ë¥˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰:

```bash
node scripts/classify-existing-scanned-documents.js
```

### ë°ì´í„°ë² ì´ìŠ¤ ì§ì ‘ í™•ì¸

Supabase ëŒ€ì‹œë³´ë“œì—ì„œ ì§ì ‘ í™•ì¸:

```sql
-- ì•ˆí¬ì ê³ ê°ì˜ ì„œë¥˜ í™•ì¸
SELECT 
  ia.id,
  ia.filename,
  ia.file_path,
  ia.is_scanned_document,
  ia.document_type,
  sd.id as scanned_document_id
FROM image_assets ia
LEFT JOIN scanned_documents sd ON sd.image_asset_id = ia.id
WHERE ia.file_path LIKE '%ahnhuija%'
  AND (ia.filename LIKE '%seukaen%' OR ia.file_path LIKE '%seukaen%')
ORDER BY ia.created_at DESC;
```

## ì˜ˆìƒ ê²°ê³¼

ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í›„:
- ì•ˆí¬ì ê³ ê°ì˜ ì„œë¥˜ê°€ "ê³ ê° ì´ë¯¸ì§€ ê´€ë¦¬" ëª¨ë‹¬ì˜ "ì„œë¥˜" íƒ­ì— í‘œì‹œë¨
- "ìŠ¤í† ë¦¬" ë©”ë‰´ì˜ "ì¥ë©´ë³„ ìƒì„¸"ì—ì„œë„ ì„œë¥˜ê°€ í‘œì‹œë¨
- ì„œë¥˜ íƒ€ì…ë³„ í•„í„°ê°€ ì •ìƒ ì‘ë™í•¨
