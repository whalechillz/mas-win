# Phase 6: Wix 예약 데이터 마이그레이션 구현 완료

## 📋 문서 정보
- **작성일**: 2025-11-26
- **상태**: 구현 완료
- **버전**: v2 (개선 버전)

---

## ✅ 구현 완료 사항

### 1. 전화번호 정규화 함수 개선 ✅

#### `normalizePhone()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`, `lib/formatters.js`
- **기능**:
  - +82 제거 및 0으로 변환
  - 01로 시작하는 번호를 010으로 변환
  - 저장: 숫자만 (하이픈 제거)
  - 유효성 검사: 11자리 숫자만 허용

#### `formatPhoneNumber()` 함수
- **위치**: `lib/formatters.js`
- **기능**: 표시용 하이픈 추가 (010-1234-5678 형식)

### 2. 동적 양식 필드 파싱 ✅

#### `parseFormFields()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`
- **기능**:
  - 양식 입력란 0-39까지 동적으로 순회
  - 필드 이름 기반 자동 매핑:
    - "현재클럽" → club, club_brand, club_loft, club_shaft
    - "비거리" → current_distance
    - "연령대" → age_group
    - "탄도" → trajectory
    - "구질" → shot_shape
  - 기타 필드는 notes에 추가

### 3. 클럽 정보 구조화 파싱 ✅

#### `parseClubInfo()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`
- **기능**:
  - "젝시오,10.5,S" → { brand: "젝시오", loft: 10.5, shaft: "S" }
  - "브랜드,로프트" 또는 "브랜드,샤프트" 형식 지원
  - 브랜드만 있는 경우도 처리

### 4. 추가 파싱 함수 ✅

#### `normalizeDistance()` 함수
- 비거리 정규화: "180m" → 180, "200~220m" → 210 (평균값)

#### `parseTrajectory()` 함수
- 탄도 파싱: "고/중/저" → "high/mid/low"

#### `parseShotShape()` 함수
- 구질 파싱: "페이드/드로우/스트레이트/훅/슬라이스" → "fade/draw/straight/hook/slice"

### 5. 기존 데이터 백업 및 삭제 ✅

#### `backupExistingBookings()` 함수
- 기존 bookings 데이터를 JSON 파일로 백업
- 백업 경로: `backup/bookings-backup-{timestamp}.json`

#### `deleteExistingBookings()` 함수
- 기존 bookings 데이터 삭제 (옵션)
- `--delete-existing` 플래그로 활성화

---

## 📝 사용법

### 기본 사용법
```bash
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv
```

### 옵션
```bash
# 백업 없이 마이그레이션
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv --no-backup

# 기존 데이터 삭제 후 마이그레이션
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv --delete-existing
```

---

## 🔄 데이터 매핑

### 전화번호
- 입력: `+82 10-1234-5678`, `821012345678`, `01-1234-5678`
- 저장: `01012345678` (숫자만)
- 표시: `010-1234-5678` (하이픈 추가)

### 클럽 정보
- 입력: `"젝시오,10.5,S"`, `"마쓰구"`, `"타이틀리스트,9.5"`
- 저장:
  - `club`: `"젝시오,10.5,S"` (원본 유지)
  - `club_brand`: `"젝시오"`
  - `club_loft`: `10.5`
  - `club_shaft`: `"S"`

### 비거리
- 입력: `"180m"`, `"200~220m"`, `"200-220"`
- 저장: `180`, `210` (평균값)

### 탄도
- 입력: `"고"`, `"중"`, `"저"`
- 저장: `"high"`, `"mid"`, `"low"`

### 구질
- 입력: `"페이드"`, `"드로우"`, `"스트레이트"`
- 저장: `"fade"`, `"draw"`, `"straight"`

---

## 📊 예상 결과

- **CSV 파일**: 900건
- **고객 수**: 약 600-700명 (중복 제거)
- **예약 수**: 900건
- **데이터 품질**: 구조화된 필드로 향상

---

## ✅ 체크리스트

- [x] 전화번호 정규화 함수 개선
- [x] 동적 양식 필드 파싱 구현
- [x] 클럽 정보 구조화 파싱 구현
- [x] 탄도, 구질 필드 파싱 구현
- [x] 기존 데이터 백업 로직 추가
- [x] 기존 데이터 삭제 옵션 추가
- [x] `club` 필드 NOT NULL 제약조건 처리
- [x] 마이그레이션 스크립트 실행 완료

---

## 📊 마이그레이션 실행 결과 (2025-11-26)

### 실행 정보
- **CSV 파일**: `database/예약 목록-2025. 11. 26..csv`
- **총 줄 수**: 1251줄 (헤더 포함, 약 1250건의 예약 데이터)

### 마이그레이션 결과
- **고객 수**: 681명 (전화번호 기준 중복 제거)
- **예약 수**: 945건
- **오류**: 0건
- **백업 파일**: `backup/bookings-backup-{timestamp}.json` 생성됨

### 처리된 데이터
- 전화번호 정규화: 모든 전화번호가 010XXXXXXXX 형식으로 저장
- 클럽 정보 구조화: 브랜드, 로프트, 샤프트 분리 저장
- 동적 필드 파싱: 양식 입력란 0-39까지 자동 매핑
- 탄도/구질 파싱: 고/중/저, 페이드/드로우 등 파싱 완료

---

## 🔄 업데이트 이력
- **2025-11-26**: 마이그레이션 스크립트 개선 완료
- **2025-11-26**: 마이그레이션 실행 완료 (고객 681명, 예약 945건)


## 📋 문서 정보
- **작성일**: 2025-11-26
- **상태**: 구현 완료
- **버전**: v2 (개선 버전)

---

## ✅ 구현 완료 사항

### 1. 전화번호 정규화 함수 개선 ✅

#### `normalizePhone()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`, `lib/formatters.js`
- **기능**:
  - +82 제거 및 0으로 변환
  - 01로 시작하는 번호를 010으로 변환
  - 저장: 숫자만 (하이픈 제거)
  - 유효성 검사: 11자리 숫자만 허용

#### `formatPhoneNumber()` 함수
- **위치**: `lib/formatters.js`
- **기능**: 표시용 하이픈 추가 (010-1234-5678 형식)

### 2. 동적 양식 필드 파싱 ✅

#### `parseFormFields()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`
- **기능**:
  - 양식 입력란 0-39까지 동적으로 순회
  - 필드 이름 기반 자동 매핑:
    - "현재클럽" → club, club_brand, club_loft, club_shaft
    - "비거리" → current_distance
    - "연령대" → age_group
    - "탄도" → trajectory
    - "구질" → shot_shape
  - 기타 필드는 notes에 추가

### 3. 클럽 정보 구조화 파싱 ✅

#### `parseClubInfo()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`
- **기능**:
  - "젝시오,10.5,S" → { brand: "젝시오", loft: 10.5, shaft: "S" }
  - "브랜드,로프트" 또는 "브랜드,샤프트" 형식 지원
  - 브랜드만 있는 경우도 처리

### 4. 추가 파싱 함수 ✅

#### `normalizeDistance()` 함수
- 비거리 정규화: "180m" → 180, "200~220m" → 210 (평균값)

#### `parseTrajectory()` 함수
- 탄도 파싱: "고/중/저" → "high/mid/low"

#### `parseShotShape()` 함수
- 구질 파싱: "페이드/드로우/스트레이트/훅/슬라이스" → "fade/draw/straight/hook/slice"

### 5. 기존 데이터 백업 및 삭제 ✅

#### `backupExistingBookings()` 함수
- 기존 bookings 데이터를 JSON 파일로 백업
- 백업 경로: `backup/bookings-backup-{timestamp}.json`

#### `deleteExistingBookings()` 함수
- 기존 bookings 데이터 삭제 (옵션)
- `--delete-existing` 플래그로 활성화

---

## 📝 사용법

### 기본 사용법
```bash
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv
```

### 옵션
```bash
# 백업 없이 마이그레이션
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv --no-backup

# 기존 데이터 삭제 후 마이그레이션
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv --delete-existing
```

---

## 🔄 데이터 매핑

### 전화번호
- 입력: `+82 10-1234-5678`, `821012345678`, `01-1234-5678`
- 저장: `01012345678` (숫자만)
- 표시: `010-1234-5678` (하이픈 추가)

### 클럽 정보
- 입력: `"젝시오,10.5,S"`, `"마쓰구"`, `"타이틀리스트,9.5"`
- 저장:
  - `club`: `"젝시오,10.5,S"` (원본 유지)
  - `club_brand`: `"젝시오"`
  - `club_loft`: `10.5`
  - `club_shaft`: `"S"`

### 비거리
- 입력: `"180m"`, `"200~220m"`, `"200-220"`
- 저장: `180`, `210` (평균값)

### 탄도
- 입력: `"고"`, `"중"`, `"저"`
- 저장: `"high"`, `"mid"`, `"low"`

### 구질
- 입력: `"페이드"`, `"드로우"`, `"스트레이트"`
- 저장: `"fade"`, `"draw"`, `"straight"`

---

## 📊 예상 결과

- **CSV 파일**: 900건
- **고객 수**: 약 600-700명 (중복 제거)
- **예약 수**: 900건
- **데이터 품질**: 구조화된 필드로 향상

---

## ✅ 체크리스트

- [x] 전화번호 정규화 함수 개선
- [x] 동적 양식 필드 파싱 구현
- [x] 클럽 정보 구조화 파싱 구현
- [x] 탄도, 구질 필드 파싱 구현
- [x] 기존 데이터 백업 로직 추가
- [x] 기존 데이터 삭제 옵션 추가
- [x] `club` 필드 NOT NULL 제약조건 처리
- [x] 마이그레이션 스크립트 실행 완료

---

## 📊 마이그레이션 실행 결과 (2025-11-26)

### 실행 정보
- **CSV 파일**: `database/예약 목록-2025. 11. 26..csv`
- **총 줄 수**: 1251줄 (헤더 포함, 약 1250건의 예약 데이터)

### 마이그레이션 결과
- **고객 수**: 681명 (전화번호 기준 중복 제거)
- **예약 수**: 945건
- **오류**: 0건
- **백업 파일**: `backup/bookings-backup-{timestamp}.json` 생성됨

### 처리된 데이터
- 전화번호 정규화: 모든 전화번호가 010XXXXXXXX 형식으로 저장
- 클럽 정보 구조화: 브랜드, 로프트, 샤프트 분리 저장
- 동적 필드 파싱: 양식 입력란 0-39까지 자동 매핑
- 탄도/구질 파싱: 고/중/저, 페이드/드로우 등 파싱 완료

---

## 🔄 업데이트 이력
- **2025-11-26**: 마이그레이션 스크립트 개선 완료
- **2025-11-26**: 마이그레이션 실행 완료 (고객 681명, 예약 945건)


## 📋 문서 정보
- **작성일**: 2025-11-26
- **상태**: 구현 완료
- **버전**: v2 (개선 버전)

---

## ✅ 구현 완료 사항

### 1. 전화번호 정규화 함수 개선 ✅

#### `normalizePhone()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`, `lib/formatters.js`
- **기능**:
  - +82 제거 및 0으로 변환
  - 01로 시작하는 번호를 010으로 변환
  - 저장: 숫자만 (하이픈 제거)
  - 유효성 검사: 11자리 숫자만 허용

#### `formatPhoneNumber()` 함수
- **위치**: `lib/formatters.js`
- **기능**: 표시용 하이픈 추가 (010-1234-5678 형식)

### 2. 동적 양식 필드 파싱 ✅

#### `parseFormFields()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`
- **기능**:
  - 양식 입력란 0-39까지 동적으로 순회
  - 필드 이름 기반 자동 매핑:
    - "현재클럽" → club, club_brand, club_loft, club_shaft
    - "비거리" → current_distance
    - "연령대" → age_group
    - "탄도" → trajectory
    - "구질" → shot_shape
  - 기타 필드는 notes에 추가

### 3. 클럽 정보 구조화 파싱 ✅

#### `parseClubInfo()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`
- **기능**:
  - "젝시오,10.5,S" → { brand: "젝시오", loft: 10.5, shaft: "S" }
  - "브랜드,로프트" 또는 "브랜드,샤프트" 형식 지원
  - 브랜드만 있는 경우도 처리

### 4. 추가 파싱 함수 ✅

#### `normalizeDistance()` 함수
- 비거리 정규화: "180m" → 180, "200~220m" → 210 (평균값)

#### `parseTrajectory()` 함수
- 탄도 파싱: "고/중/저" → "high/mid/low"

#### `parseShotShape()` 함수
- 구질 파싱: "페이드/드로우/스트레이트/훅/슬라이스" → "fade/draw/straight/hook/slice"

### 5. 기존 데이터 백업 및 삭제 ✅

#### `backupExistingBookings()` 함수
- 기존 bookings 데이터를 JSON 파일로 백업
- 백업 경로: `backup/bookings-backup-{timestamp}.json`

#### `deleteExistingBookings()` 함수
- 기존 bookings 데이터 삭제 (옵션)
- `--delete-existing` 플래그로 활성화

---

## 📝 사용법

### 기본 사용법
```bash
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv
```

### 옵션
```bash
# 백업 없이 마이그레이션
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv --no-backup

# 기존 데이터 삭제 후 마이그레이션
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv --delete-existing
```

---

## 🔄 데이터 매핑

### 전화번호
- 입력: `+82 10-1234-5678`, `821012345678`, `01-1234-5678`
- 저장: `01012345678` (숫자만)
- 표시: `010-1234-5678` (하이픈 추가)

### 클럽 정보
- 입력: `"젝시오,10.5,S"`, `"마쓰구"`, `"타이틀리스트,9.5"`
- 저장:
  - `club`: `"젝시오,10.5,S"` (원본 유지)
  - `club_brand`: `"젝시오"`
  - `club_loft`: `10.5`
  - `club_shaft`: `"S"`

### 비거리
- 입력: `"180m"`, `"200~220m"`, `"200-220"`
- 저장: `180`, `210` (평균값)

### 탄도
- 입력: `"고"`, `"중"`, `"저"`
- 저장: `"high"`, `"mid"`, `"low"`

### 구질
- 입력: `"페이드"`, `"드로우"`, `"스트레이트"`
- 저장: `"fade"`, `"draw"`, `"straight"`

---

## 📊 예상 결과

- **CSV 파일**: 900건
- **고객 수**: 약 600-700명 (중복 제거)
- **예약 수**: 900건
- **데이터 품질**: 구조화된 필드로 향상

---

## ✅ 체크리스트

- [x] 전화번호 정규화 함수 개선
- [x] 동적 양식 필드 파싱 구현
- [x] 클럽 정보 구조화 파싱 구현
- [x] 탄도, 구질 필드 파싱 구현
- [x] 기존 데이터 백업 로직 추가
- [x] 기존 데이터 삭제 옵션 추가
- [x] `club` 필드 NOT NULL 제약조건 처리
- [x] 마이그레이션 스크립트 실행 완료

---

## 📊 마이그레이션 실행 결과 (2025-11-26)

### 실행 정보
- **CSV 파일**: `database/예약 목록-2025. 11. 26..csv`
- **총 줄 수**: 1251줄 (헤더 포함, 약 1250건의 예약 데이터)

### 마이그레이션 결과
- **고객 수**: 681명 (전화번호 기준 중복 제거)
- **예약 수**: 945건
- **오류**: 0건
- **백업 파일**: `backup/bookings-backup-{timestamp}.json` 생성됨

### 처리된 데이터
- 전화번호 정규화: 모든 전화번호가 010XXXXXXXX 형식으로 저장
- 클럽 정보 구조화: 브랜드, 로프트, 샤프트 분리 저장
- 동적 필드 파싱: 양식 입력란 0-39까지 자동 매핑
- 탄도/구질 파싱: 고/중/저, 페이드/드로우 등 파싱 완료

---

## 🔄 업데이트 이력
- **2025-11-26**: 마이그레이션 스크립트 개선 완료
- **2025-11-26**: 마이그레이션 실행 완료 (고객 681명, 예약 945건)


## 📋 문서 정보
- **작성일**: 2025-11-26
- **상태**: 구현 완료
- **버전**: v2 (개선 버전)

---

## ✅ 구현 완료 사항

### 1. 전화번호 정규화 함수 개선 ✅

#### `normalizePhone()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`, `lib/formatters.js`
- **기능**:
  - +82 제거 및 0으로 변환
  - 01로 시작하는 번호를 010으로 변환
  - 저장: 숫자만 (하이픈 제거)
  - 유효성 검사: 11자리 숫자만 허용

#### `formatPhoneNumber()` 함수
- **위치**: `lib/formatters.js`
- **기능**: 표시용 하이픈 추가 (010-1234-5678 형식)

### 2. 동적 양식 필드 파싱 ✅

#### `parseFormFields()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`
- **기능**:
  - 양식 입력란 0-39까지 동적으로 순회
  - 필드 이름 기반 자동 매핑:
    - "현재클럽" → club, club_brand, club_loft, club_shaft
    - "비거리" → current_distance
    - "연령대" → age_group
    - "탄도" → trajectory
    - "구질" → shot_shape
  - 기타 필드는 notes에 추가

### 3. 클럽 정보 구조화 파싱 ✅

#### `parseClubInfo()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`
- **기능**:
  - "젝시오,10.5,S" → { brand: "젝시오", loft: 10.5, shaft: "S" }
  - "브랜드,로프트" 또는 "브랜드,샤프트" 형식 지원
  - 브랜드만 있는 경우도 처리

### 4. 추가 파싱 함수 ✅

#### `normalizeDistance()` 함수
- 비거리 정규화: "180m" → 180, "200~220m" → 210 (평균값)

#### `parseTrajectory()` 함수
- 탄도 파싱: "고/중/저" → "high/mid/low"

#### `parseShotShape()` 함수
- 구질 파싱: "페이드/드로우/스트레이트/훅/슬라이스" → "fade/draw/straight/hook/slice"

### 5. 기존 데이터 백업 및 삭제 ✅

#### `backupExistingBookings()` 함수
- 기존 bookings 데이터를 JSON 파일로 백업
- 백업 경로: `backup/bookings-backup-{timestamp}.json`

#### `deleteExistingBookings()` 함수
- 기존 bookings 데이터 삭제 (옵션)
- `--delete-existing` 플래그로 활성화

---

## 📝 사용법

### 기본 사용법
```bash
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv
```

### 옵션
```bash
# 백업 없이 마이그레이션
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv --no-backup

# 기존 데이터 삭제 후 마이그레이션
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv --delete-existing
```

---

## 🔄 데이터 매핑

### 전화번호
- 입력: `+82 10-1234-5678`, `821012345678`, `01-1234-5678`
- 저장: `01012345678` (숫자만)
- 표시: `010-1234-5678` (하이픈 추가)

### 클럽 정보
- 입력: `"젝시오,10.5,S"`, `"마쓰구"`, `"타이틀리스트,9.5"`
- 저장:
  - `club`: `"젝시오,10.5,S"` (원본 유지)
  - `club_brand`: `"젝시오"`
  - `club_loft`: `10.5`
  - `club_shaft`: `"S"`

### 비거리
- 입력: `"180m"`, `"200~220m"`, `"200-220"`
- 저장: `180`, `210` (평균값)

### 탄도
- 입력: `"고"`, `"중"`, `"저"`
- 저장: `"high"`, `"mid"`, `"low"`

### 구질
- 입력: `"페이드"`, `"드로우"`, `"스트레이트"`
- 저장: `"fade"`, `"draw"`, `"straight"`

---

## 📊 예상 결과

- **CSV 파일**: 900건
- **고객 수**: 약 600-700명 (중복 제거)
- **예약 수**: 900건
- **데이터 품질**: 구조화된 필드로 향상

---

## ✅ 체크리스트

- [x] 전화번호 정규화 함수 개선
- [x] 동적 양식 필드 파싱 구현
- [x] 클럽 정보 구조화 파싱 구현
- [x] 탄도, 구질 필드 파싱 구현
- [x] 기존 데이터 백업 로직 추가
- [x] 기존 데이터 삭제 옵션 추가
- [x] `club` 필드 NOT NULL 제약조건 처리
- [x] 마이그레이션 스크립트 실행 완료

---

## 📊 마이그레이션 실행 결과 (2025-11-26)

### 실행 정보
- **CSV 파일**: `database/예약 목록-2025. 11. 26..csv`
- **총 줄 수**: 1251줄 (헤더 포함, 약 1250건의 예약 데이터)

### 마이그레이션 결과
- **고객 수**: 681명 (전화번호 기준 중복 제거)
- **예약 수**: 945건
- **오류**: 0건
- **백업 파일**: `backup/bookings-backup-{timestamp}.json` 생성됨

### 처리된 데이터
- 전화번호 정규화: 모든 전화번호가 010XXXXXXXX 형식으로 저장
- 클럽 정보 구조화: 브랜드, 로프트, 샤프트 분리 저장
- 동적 필드 파싱: 양식 입력란 0-39까지 자동 매핑
- 탄도/구질 파싱: 고/중/저, 페이드/드로우 등 파싱 완료

---

## 🔄 업데이트 이력
- **2025-11-26**: 마이그레이션 스크립트 개선 완료
- **2025-11-26**: 마이그레이션 실행 완료 (고객 681명, 예약 945건)


## 📋 문서 정보
- **작성일**: 2025-11-26
- **상태**: 구현 완료
- **버전**: v2 (개선 버전)

---

## ✅ 구현 완료 사항

### 1. 전화번호 정규화 함수 개선 ✅

#### `normalizePhone()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`, `lib/formatters.js`
- **기능**:
  - +82 제거 및 0으로 변환
  - 01로 시작하는 번호를 010으로 변환
  - 저장: 숫자만 (하이픈 제거)
  - 유효성 검사: 11자리 숫자만 허용

#### `formatPhoneNumber()` 함수
- **위치**: `lib/formatters.js`
- **기능**: 표시용 하이픈 추가 (010-1234-5678 형식)

### 2. 동적 양식 필드 파싱 ✅

#### `parseFormFields()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`
- **기능**:
  - 양식 입력란 0-39까지 동적으로 순회
  - 필드 이름 기반 자동 매핑:
    - "현재클럽" → club, club_brand, club_loft, club_shaft
    - "비거리" → current_distance
    - "연령대" → age_group
    - "탄도" → trajectory
    - "구질" → shot_shape
  - 기타 필드는 notes에 추가

### 3. 클럽 정보 구조화 파싱 ✅

#### `parseClubInfo()` 함수
- **위치**: `scripts/migrate-wix-bookings.js`
- **기능**:
  - "젝시오,10.5,S" → { brand: "젝시오", loft: 10.5, shaft: "S" }
  - "브랜드,로프트" 또는 "브랜드,샤프트" 형식 지원
  - 브랜드만 있는 경우도 처리

### 4. 추가 파싱 함수 ✅

#### `normalizeDistance()` 함수
- 비거리 정규화: "180m" → 180, "200~220m" → 210 (평균값)

#### `parseTrajectory()` 함수
- 탄도 파싱: "고/중/저" → "high/mid/low"

#### `parseShotShape()` 함수
- 구질 파싱: "페이드/드로우/스트레이트/훅/슬라이스" → "fade/draw/straight/hook/slice"

### 5. 기존 데이터 백업 및 삭제 ✅

#### `backupExistingBookings()` 함수
- 기존 bookings 데이터를 JSON 파일로 백업
- 백업 경로: `backup/bookings-backup-{timestamp}.json`

#### `deleteExistingBookings()` 함수
- 기존 bookings 데이터 삭제 (옵션)
- `--delete-existing` 플래그로 활성화

---

## 📝 사용법

### 기본 사용법
```bash
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv
```

### 옵션
```bash
# 백업 없이 마이그레이션
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv --no-backup

# 기존 데이터 삭제 후 마이그레이션
node scripts/migrate-wix-bookings.js database/예약\ 목록-2025.\ 11.\ 26..csv --delete-existing
```

---

## 🔄 데이터 매핑

### 전화번호
- 입력: `+82 10-1234-5678`, `821012345678`, `01-1234-5678`
- 저장: `01012345678` (숫자만)
- 표시: `010-1234-5678` (하이픈 추가)

### 클럽 정보
- 입력: `"젝시오,10.5,S"`, `"마쓰구"`, `"타이틀리스트,9.5"`
- 저장:
  - `club`: `"젝시오,10.5,S"` (원본 유지)
  - `club_brand`: `"젝시오"`
  - `club_loft`: `10.5`
  - `club_shaft`: `"S"`

### 비거리
- 입력: `"180m"`, `"200~220m"`, `"200-220"`
- 저장: `180`, `210` (평균값)

### 탄도
- 입력: `"고"`, `"중"`, `"저"`
- 저장: `"high"`, `"mid"`, `"low"`

### 구질
- 입력: `"페이드"`, `"드로우"`, `"스트레이트"`
- 저장: `"fade"`, `"draw"`, `"straight"`

---

## 📊 예상 결과

- **CSV 파일**: 900건
- **고객 수**: 약 600-700명 (중복 제거)
- **예약 수**: 900건
- **데이터 품질**: 구조화된 필드로 향상

---

## ✅ 체크리스트

- [x] 전화번호 정규화 함수 개선
- [x] 동적 양식 필드 파싱 구현
- [x] 클럽 정보 구조화 파싱 구현
- [x] 탄도, 구질 필드 파싱 구현
- [x] 기존 데이터 백업 로직 추가
- [x] 기존 데이터 삭제 옵션 추가
- [x] `club` 필드 NOT NULL 제약조건 처리
- [x] 마이그레이션 스크립트 실행 완료

---

## 📊 마이그레이션 실행 결과 (2025-11-26)

### 실행 정보
- **CSV 파일**: `database/예약 목록-2025. 11. 26..csv`
- **총 줄 수**: 1251줄 (헤더 포함, 약 1250건의 예약 데이터)

### 마이그레이션 결과
- **고객 수**: 681명 (전화번호 기준 중복 제거)
- **예약 수**: 945건
- **오류**: 0건
- **백업 파일**: `backup/bookings-backup-{timestamp}.json` 생성됨

### 처리된 데이터
- 전화번호 정규화: 모든 전화번호가 010XXXXXXXX 형식으로 저장
- 클럽 정보 구조화: 브랜드, 로프트, 샤프트 분리 저장
- 동적 필드 파싱: 양식 입력란 0-39까지 자동 매핑
- 탄도/구질 파싱: 고/중/저, 페이드/드로우 등 파싱 완료

---

## 🔄 업데이트 이력
- **2025-11-26**: 마이그레이션 스크립트 개선 완료
- **2025-11-26**: 마이그레이션 실행 완료 (고객 681명, 예약 945건)

