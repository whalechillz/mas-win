# ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° ì‹œìŠ¤í…œ ê°œì„  ê²€í† 

## ğŸ“‹ ê²€í†  í•­ëª©

### 1. ì¹´í…Œê³ ë¦¬ ì‹œìŠ¤í…œ í•„ìš”ì„± ê²€í† 

#### í˜„ì¬ ìƒí™©
- **ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° í¸ì§‘**: ì¹´í…Œê³ ë¦¬ ì²´í¬ë°•ìŠ¤ (ê³¨í”„ì½”ìŠ¤, ì Šì€ ê³¨í¼, ì‹œë‹ˆì–´ ê³¨í¼, ìŠ¤ìœ™, ì¥ë¹„, ë“œë¼ì´ë²„, ë“œë¼ì´ë²„ìƒ·)
- **ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ ê´€ë¦¬ - ì¹´í…Œê³ ë¦¬ ê´€ë¦¬**: ë³„ë„ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ UI (`/admin/category-management`)
- **ë¬¸ì œì **: 
  - ì¹´í…Œê³ ë¦¬ ì²´í¬ë°•ìŠ¤ ì €ì¥ì´ ì•ˆë¨ (500 ì˜¤ë¥˜)
  - ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ API ì¤‘ë³µ (`/api/admin/categories.js` vs `/api/admin/image-categories.js`)
  - ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ ê´€ë¦¬ì™€ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ê°€ ì¤‘ë³µ

#### ì¹´í…Œê³ ë¦¬ vs í‚¤ì›Œë“œ ë¹„êµ

| í•­ëª© | ì¹´í…Œê³ ë¦¬ | í‚¤ì›Œë“œ |
|------|---------|--------|
| **ìš©ë„** | ì´ë¯¸ì§€ ë¶„ë¥˜ ë° í•„í„°ë§ | SEO ë° ê²€ìƒ‰ ìµœì í™” |
| **êµ¬ì¡°** | ê³ ì •ëœ ì²´í¬ë°•ìŠ¤ ì„ íƒ | ììœ  ì…ë ¥ (ì‰¼í‘œ êµ¬ë¶„) |
| **ì €ì¥ ìœ„ì¹˜** | `image_metadata.category_id` (FK) | `image_metadata.tags` (ë°°ì—´) |
| **í•„í„°ë§** | ì¹´í…Œê³ ë¦¬ë³„ ì´ë¯¸ì§€ í•„í„°ë§ | í‚¤ì›Œë“œ ê¸°ë°˜ ê²€ìƒ‰ |
| **í•„ìˆ˜ ì—¬ë¶€** | ì„ íƒ ì‚¬í•­ | ê¶Œì¥ |

#### ê¶Œì¥ ì‚¬í•­: í‚¤ì›Œë“œ ì¤‘ì‹¬ìœ¼ë¡œ ì „í™˜

**ì´ìœ :**
1. **ì¤‘ë³µ ì œê±°**: ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ì™€ ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° í¸ì§‘ì´ ì¤‘ë³µ
2. **ìœ ì—°ì„±**: í‚¤ì›Œë“œëŠ” ììœ  ì…ë ¥, ì¹´í…Œê³ ë¦¬ëŠ” ê³ ì • ì„ íƒ
3. **SEO ìµœì í™”**: í‚¤ì›Œë“œê°€ SEOì— ë” ì§ì ‘ì  ì˜í–¥
4. **ê´€ë¦¬ ë¹„ìš©**: ë³„ë„ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ UI ì œê±° ê°€ëŠ¥

**êµ¬í˜„ ë°©ì•ˆ:**
1. **ì¹´í…Œê³ ë¦¬ ì²´í¬ë°•ìŠ¤ ì œê±°** â†’ í‚¤ì›Œë“œ ì…ë ¥ ê°•í™”
2. **í‚¤ì›Œë“œ ìë™ ì™„ì„±**: ìì£¼ ì‚¬ìš©í•˜ëŠ” í‚¤ì›Œë“œ ì¶”ì²œ (ê³¨í”„, ë“œë¼ì´ë²„, ìŠ¤ìœ™ ë“±)
3. **í‚¤ì›Œë“œ í•„í„°ë§**: í‚¤ì›Œë“œ ê¸°ë°˜ ì´ë¯¸ì§€ í•„í„°ë§ (ê¸°ì¡´ ì¹´í…Œê³ ë¦¬ë³„ í•„í„° ëŒ€ì²´)
4. **í‚¤ì›Œë“œ íƒœê·¸ UI**: í‚¤ì›Œë“œë¥¼ íƒœê·¸ í˜•íƒœë¡œ í‘œì‹œ (ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ ê´€ë¦¬)

**ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš:**
- ê¸°ì¡´ `category_id`ëŠ” ìœ ì§€ (í•˜ìœ„ í˜¸í™˜ì„±)
- ì‹ ê·œ ì´ë¯¸ì§€ëŠ” í‚¤ì›Œë“œ ì¤‘ì‹¬ìœ¼ë¡œ ê´€ë¦¬
- ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ UIëŠ” ì ì§„ì ìœ¼ë¡œ ì œê±° ë˜ëŠ” í‚¤ì›Œë“œ ê´€ë¦¬ë¡œ ì „í™˜

---

### 2. íŒŒì¼ëª… ìë™ ìƒì„± ê°œì„ 

#### í˜„ì¬ ìƒí™©
- **í•œê¸€ AI ìƒì„±**: ë©”íƒ€ë°ì´í„°(ALT, í‚¤ì›Œë“œ, ì œëª©, ì„¤ëª…)ë§Œ ìƒì„±
- **í•˜ì´ë¸Œë¦¬ë“œ SEO íŒŒì¼ëª… ìƒì„±**: ë³„ë„ ë²„íŠ¼ í´ë¦­ í•„ìš”
- **ë¬¸ì œì **: ë‘ ë‹¨ê³„ ì‘ì—…ìœ¼ë¡œ ë¶ˆí¸

#### ê°œì„  ë°©ì•ˆ: í•œê¸€ AI ìƒì„± ì‹œ íŒŒì¼ëª…ê¹Œì§€ ìë™ ìƒì„±

**êµ¬í˜„ ë°©ë²•:**

```typescript
// components/ImageMetadataModal/index.tsx - handleGenerateAll í•¨ìˆ˜ ìˆ˜ì •
const handleGenerateAll = useCallback(async (language: 'korean' | 'english') => {
  if (!image) return;

  const result = await generateAllMetadata(image.url, {
    language,
    optimize: true
  });
  
  if (result.success && result.data) {
    setForm(prev => ({ ...prev, ...result.data }));
    setHasChanges(true);
    
    // âœ… ì¶”ê°€: ë©”íƒ€ë°ì´í„° ìƒì„± í›„ ìë™ìœ¼ë¡œ íŒŒì¼ëª… ìƒì„±
    // 1ì´ˆ ëŒ€ê¸° í›„ íŒŒì¼ëª… ìƒì„± (í¼ ìƒíƒœ ì—…ë°ì´íŠ¸ ëŒ€ê¸°)
    setTimeout(async () => {
      await handleGenerateSEOFileName();
    }, 1000);
  } else {
    alert(`AI ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ${result.error}`);
  }
}, [image, generateAllMetadata, handleGenerateSEOFileName]);
```

**ì¥ì :**
1. **ì›ìŠ¤í†± ì›Œí¬í”Œë¡œìš°**: í•œ ë²ˆì˜ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ëª¨ë“  ë©”íƒ€ë°ì´í„° + íŒŒì¼ëª… ìƒì„±
2. **ì¼ê´€ì„±**: ì œëª©/í‚¤ì›Œë“œì™€ íŒŒì¼ëª…ì´ ì¼ì¹˜
3. **ì‚¬ìš©ì í¸ì˜ì„±**: ì‘ì—… ë‹¨ê³„ ê°ì†Œ

**ì£¼ì˜ì‚¬í•­:**
- íŒŒì¼ëª… ìƒì„± ì „ì— ì œëª©ê³¼ í‚¤ì›Œë“œê°€ ì±„ì›Œì ¸ì•¼ í•¨
- íŒŒì¼ëª… ìˆ˜ë™ ìˆ˜ì •ë„ ê°€ëŠ¥í•´ì•¼ í•¨
- ê¸°ì¡´ íŒŒì¼ëª… ìœ ì§€ ì˜µì…˜ ì œê³µ

---

## ğŸ” ì¶”ê°€ ê²€í†  ì‚¬í•­

### 3. ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ API ì¤‘ë³µ ë¬¸ì œ

#### ë¬¸ì œì 
- `/api/admin/categories.js`: ì™„ì „í•œ êµ¬í˜„ (í•œê¸€â†’ì˜ë¬¸ ë³€í™˜, description ì§€ì›, ì˜¤ë¥˜ ì²˜ë¦¬)
- `/api/admin/image-categories.js`: ê°„ë‹¨í•œ êµ¬í˜„ (name, slugë§Œ)

#### í•´ê²° ë°©ì•ˆ

**ì˜µì…˜ 1: í†µí•© (ê¶Œì¥)**
- `/api/admin/categories.js`ë§Œ ì‚¬ìš©
- `/api/admin/image-categories.js` ì œê±°
- ëª¨ë“  ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ ìš”ì²­ì„ `/api/admin/categories.js`ë¡œ í†µì¼

**ì˜µì…˜ 2: ë¶„ë¦¬ ìœ ì§€**
- `/api/admin/categories.js`: ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬
- `/api/admin/image-categories.js`: ë¸”ë¡œê·¸ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ (ìˆë‹¤ë©´)
- ëª…í™•í•œ ìš©ë„ ë¶„ë¦¬ ë° ë¬¸ì„œí™”

**í˜„ì¬ ì‚¬ìš© í˜„í™©:**
- ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬: `/api/admin/categories.js` ì‚¬ìš©
- ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ UI: í™•ì¸ í•„ìš” (ì–´ëŠ API ì‚¬ìš©?)

### 4. ì¹´í…Œê³ ë¦¬ ì €ì¥ 500 ì˜¤ë¥˜ ì›ì¸

#### í™•ì¸ëœ ë¬¸ì œ
- `categories.js` DELETE ë©”ì„œë“œì—ì„œ `image_metadata.category` ì‚¬ìš© (âŒ ì˜ëª»ë¨)
- ì‹¤ì œ í…Œì´ë¸” ì»¬ëŸ¼ì€ `category_id` (âœ… ìˆ˜ì • ì™„ë£Œ)

#### ì¶”ê°€ í™•ì¸ í•„ìš”
- POST/PUT ë©”ì„œë“œì—ì„œë„ ì˜¬ë°”ë¥¸ ì»¬ëŸ¼ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì „ì†¡í•˜ëŠ” ì¹´í…Œê³ ë¦¬ ë°ì´í„° í˜•ì‹ í™•ì¸

---

## ğŸ“ êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Phase 1: ì¦‰ì‹œ ìˆ˜ì • (í•„ìˆ˜)
1. âœ… ì¹´í…Œê³ ë¦¬ API 500 ì˜¤ë¥˜ ìˆ˜ì • (`category` â†’ `category_id`)
2. â³ ì¹´í…Œê³ ë¦¬ ì €ì¥ ë¬¸ì œ í•´ê²°
3. â³ íŒŒì¼ëª… í™•ì¥ì ì¤‘ë³µ ë°©ì§€ (ë¬¸ì„œí™” ì™„ë£Œ)

### Phase 2: ê°œì„  ì‘ì—… (ê¶Œì¥)
1. **í•œê¸€ AI ìƒì„± ì‹œ íŒŒì¼ëª… ìë™ ìƒì„±**
   - êµ¬í˜„ ì‹œê°„: 30ë¶„
   - í…ŒìŠ¤íŠ¸ ì‹œê°„: 15ë¶„
   - íš¨ê³¼: ì‚¬ìš©ì í¸ì˜ì„± í–¥ìƒ

2. **í‚¤ì›Œë“œ ì¤‘ì‹¬ ì „í™˜**
   - êµ¬í˜„ ì‹œê°„: 2-3ì‹œê°„
   - ë§ˆì´ê·¸ë ˆì´ì…˜: ê¸°ì¡´ ë°ì´í„° ë³€í™˜
   - íš¨ê³¼: ì¤‘ë³µ ì œê±°, ìœ ì—°ì„± í–¥ìƒ

### Phase 3: ì„ íƒ ì‚¬í•­
1. ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ API í†µí•©
2. ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ UI ì œê±° ë˜ëŠ” ê°œí¸

---

## ğŸ”§ ì½”ë“œ ë³€ê²½ ì‚¬í•­ ìš”ì•½

### 1. ì¹´í…Œê³ ë¦¬ ì €ì¥ ë¬¸ì œ í•´ê²°

**íŒŒì¼**: `pages/api/admin/categories.js`
```javascript
// âŒ ì˜ëª»ëœ ì½”ë“œ
.eq('category', id)

// âœ… ìˆ˜ì •ëœ ì½”ë“œ
.eq('category_id', id)
```

### 2. í•œê¸€ AI ìƒì„± ì‹œ íŒŒì¼ëª… ìë™ ìƒì„±

**íŒŒì¼**: `components/ImageMetadataModal/index.tsx`
```typescript
const handleGenerateAll = useCallback(async (language: 'korean' | 'english') => {
  // ... ê¸°ì¡´ ì½”ë“œ ...
  
  if (result.success && result.data) {
    setForm(prev => ({ ...prev, ...result.data }));
    setHasChanges(true);
    
    // âœ… ì¶”ê°€: íŒŒì¼ëª… ìë™ ìƒì„±
    setTimeout(async () => {
      await handleGenerateSEOFileName();
    }, 1000);
  }
}, [image, generateAllMetadata, handleGenerateSEOFileName]);
```

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- [ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° ë° íŒŒì¼ëª… ì €ì¥ ê°€ì´ë“œ](./image-metadata-filename-guide.md)
- ì¹´í…Œê³ ë¦¬ API ë¬¸ì„œ: `pages/api/admin/categories.js`
- ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° API ë¬¸ì„œ: `pages/api/admin/image-metadata.js`

