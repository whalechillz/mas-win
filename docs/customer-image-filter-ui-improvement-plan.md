# 고객 이미지 관리 UI 필터 개선 계획

## 요구사항

### 1. 방문일자 필터 버튼 동작 개선
- **현재**: 특정 날짜를 선택하면 해당 날짜만 필터링됨
- **요구사항**: 특정 날짜(2026-01-27 등)를 체크해도 "전체", "2026-01-27", "2026-01-26" 등 다른 날짜 버튼이 모두 계속 표시되어야 함
- **목적**: 날짜 간 빠른 전환이 가능하도록 UX 개선

### 2. "날짜별", "타입별", "전체" 버튼 기능 분석 및 삭제 검토
- **현재**: 우측에 "날짜별", "타입별", "전체" 버튼이 있음
- **요구사항**: 이 버튼들의 기능이 무엇인지 확인하고, 방문일자 필터와 중복되는지 검토
- **목적**: 불필요한 UI 요소 제거로 사용자 혼란 방지

## 현재 상태 분석

### 방문일자 필터
- **위치**: 모달 상단, "방문일자 필터" 라벨 아래
- **기능**: 특정 날짜를 선택하면 해당 날짜의 이미지만 표시
- **버튼**: "전체", "2026-01-27", "2026-01-26" 등 (availableDates 기반)
- **상태**: `selectedDateFilter` (string | null)

### "날짜별", "타입별", "전체" 버튼
- **위치**: 이미지 목록 상단 우측
- **기능**: 
  - **"날짜별"**: 이미지를 날짜별로 그룹화하여 표시 (예: "2026-01-27 (2개)", "2026-01-26 (9개)")
  - **"타입별"**: 이미지를 타입별로 그룹화하여 표시 (예: "swing-video (5개)", "signature (3개)")
  - **"전체"**: 그룹화 없이 모든 이미지를 한 번에 표시
- **상태**: `viewMode` ('all' | 'date' | 'type')
- **적용 범위**: `activeMediaTab === 'image'`일 때만 표시

## 기능 비교

### 방문일자 필터 vs "날짜별" 버튼

| 기능 | 방문일자 필터 | "날짜별" 버튼 |
|------|--------------|--------------|
| **목적** | 특정 날짜의 이미지만 필터링 | 이미지를 날짜별로 그룹화하여 표시 |
| **동작** | 선택한 날짜의 이미지만 표시 | 모든 날짜의 이미지를 날짜별로 그룹화하여 표시 |
| **결과** | 필터링된 이미지 목록 | 그룹화된 이미지 목록 (섹션별로 구분) |

**결론**: 두 기능은 **다른 목적**을 가짐
- 방문일자 필터: 특정 날짜만 보기 (필터링)
- "날짜별" 버튼: 모든 날짜를 날짜별로 그룹화하여 보기 (표시 방식)

### "타입별" 버튼
- 이미지를 타입별로 그룹화하여 표시
- 방문일자 필터와는 독립적인 기능
- 예: "swing-video (5개)", "signature (3개)" 등

### "전체" 버튼
- 그룹화 없이 모든 이미지를 한 번에 표시
- 방문일자 필터와는 독립적인 기능

## 요구사항 분석

### 요구사항 1: 방문일자 필터 버튼 항상 표시
- **현재 상태**: 이미 모든 날짜 버튼이 항상 표시됨 (`availableDates.map`으로 렌더링)
- **확인 결과**: 특정 날짜 선택 시에도 모든 날짜 버튼이 계속 표시됨
- **수정 필요**: 없음 (이미 구현되어 있음)
- **확인 사항**: UI에서 모든 버튼이 항상 보이는지 최종 확인

### 요구사항 2: "날짜별", "타입별", "전체" 버튼 삭제 검토
- **분석 결과**: 
  - **"날짜별" 버튼**: 날짜별로 그룹화하여 표시 (예: "2026-01-27 (2개)", "2026-01-26 (9개)")
    - 방문일자 필터와 **기능이 다름** (필터링 vs 그룹화)
    - 하지만 사용자 입장에서는 혼란스러울 수 있음
  - **"타입별" 버튼**: 타입별로 그룹화하여 표시
    - 방문일자 필터와는 독립적인 기능
    - 유용할 수 있지만 사용자가 삭제를 원함
  - **"전체" 버튼**: 그룹화 없이 모든 이미지를 한 번에 표시
    - 방문일자 필터와는 독립적인 기능
- **사용자 요청**: 방문일자 필터가 있어서 삭제해도 되지 않나?
- **권장 사항**: 
  - 사용자가 삭제를 원하므로 **삭제 권장**
  - 기본 보기 방식은 "날짜별" 그룹화로 고정
  - 방문일자 필터로 날짜 선택 시 해당 날짜만 표시

## 구현 계획

### Phase 1: 방문일자 필터 버튼 동작 확인 ✅

**파일**: `pages/admin/customers/index.tsx`

**확인 결과**:
1. ✅ `availableDates`가 항상 모든 날짜를 포함함
2. ✅ 특정 날짜 선택 시에도 모든 날짜 버튼이 계속 표시됨
3. ✅ 현재 구현이 요구사항을 만족함

**수정 필요**: 없음 (이미 구현되어 있음)

**현재 구현** (2922-2960줄):
```typescript
// 방문일자 필터 버튼 렌더링
{availableDates.length > 0 && (
  <div>
    <label className="block text-sm font-medium text-gray-700 mb-2">
      방문일자 필터
    </label>
    <div className="flex gap-2 flex-wrap mb-4">
      {/* "전체" 버튼 - 항상 표시 */}
      <button
        onClick={() => {
          setSelectedDateFilter(null);
          loadCustomerImages(null);
        }}
        className={`px-3 py-1 rounded text-sm ${
          selectedDateFilter === null
            ? 'bg-blue-600 text-white'
            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
        }`}
      >
        전체
      </button>
      {/* 모든 날짜 버튼 - 항상 표시 */}
      {availableDates.map(date => (
        <button
          key={date}
          onClick={() => {
            setSelectedDateFilter(date);
            loadCustomerImages(date);
          }}
          className={`px-3 py-1 rounded text-sm ${
            selectedDateFilter === date
              ? 'bg-blue-600 text-white'
              : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
          }`}
        >
          {date}
        </button>
      ))}
    </div>
  </div>
)}
```

### Phase 2: "날짜별", "타입별", "전체" 버튼 삭제

**파일**: `pages/admin/customers/index.tsx`

**수정 내용**:

1. **"날짜별", "타입별", "전체" 버튼 제거**
   - 버튼 렌더링 코드 제거 (3026-3058줄 근처)
   - `viewMode` 상태를 기본값('date')으로 고정
   - `setViewMode` 호출 제거

2. **기본 보기 방식 결정**
   - 항상 날짜별 그룹화 표시 (기본값)
   - 방문일자 필터가 선택되지 않았을 때: 모든 날짜를 날짜별로 그룹화하여 표시
   - 방문일자 필터가 선택되었을 때: 선택된 날짜의 이미지만 표시 (그룹화 불필요)

3. **viewMode 상태 수정**
   ```typescript
   // 기존
   const [viewMode, setViewMode] = useState<'all' | 'date' | 'type'>('date');
   
   // 수정 후: 상수로 변경
   const viewMode = 'date' as const; // 항상 날짜별 그룹화
   ```

4. **날짜별 보기 로직 유지 및 단순화**
   - 방문일자 필터가 없을 때: 날짜별로 그룹화하여 표시
   - 방문일자 필터가 있을 때: 선택된 날짜의 이미지만 표시 (그룹화 없이)
   - 타입별 보기 로직 제거
   - 전체 보기 로직 제거

**구현 예시**:
```typescript
// 날짜별 보기 (기본값, viewMode 버튼 제거)
{filteredMediaByTabWithDate.length > 0 && (
  <div>
    {Object.entries(
      filteredMediaByTabWithDate.reduce((acc: any, img: any) => {
        const date = img.date_folder || 'unknown';
        if (!acc[date]) acc[date] = [];
        acc[date].push(img);
        return acc;
      }, {})
    ).map(([date, images]: [string, any[]]) => (
      <div key={date} className="mb-6">
        <h4 className="text-md font-semibold text-gray-800 mb-2">
          {date} ({images.length}개)
        </h4>
        <div className="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
          {/* 이미지 렌더링 */}
        </div>
      </div>
    ))}
  </div>
)}
```

## 파일 구조

### 수정할 파일

1. **`pages/admin/customers/index.tsx`**
   - 방문일자 필터 버튼 동작 확인 및 수정 (필요시)
   - "날짜별", "타입별", "전체" 버튼 제거
   - `viewMode` 상태 제거 또는 기본값으로 고정
   - 날짜별/타입별 보기 로직 정리

## 구현 완료

### Phase 1: 방문일자 필터 버튼 동작 확인 ✅
- 확인 완료: 이미 모든 날짜 버튼이 항상 표시됨
- 수정 필요 없음

## 예상 작업 시간

- Phase 1 (방문일자 필터 확인): ✅ 완료
- Phase 2 ("날짜별", "타입별", "전체" 버튼 삭제): 1-2시간
- 테스트 및 디버깅: 0.5-1시간
- **총 예상 시간: 1.5-3시간**

## 우선순위

**높음**: 사용자가 직접 요청한 UI 개선 사항

## 테스트 계획

### Phase 1 테스트

1. **방문일자 필터 버튼 테스트**
   - "전체" 버튼 클릭 시 모든 날짜 버튼이 표시되는지 확인
   - 특정 날짜(2026-01-27) 선택 시 모든 날짜 버튼이 계속 표시되는지 확인
   - 다른 날짜 버튼 클릭 시 빠르게 전환되는지 확인

### Phase 2 테스트

1. **버튼 제거 테스트**
   - "날짜별", "타입별", "전체" 버튼이 더 이상 표시되지 않는지 확인
   - 기본 보기 방식(날짜별 그룹화)이 정상 작동하는지 확인
   - 방문일자 필터와의 조합이 정상 작동하는지 확인

2. **기능 테스트**
   - 방문일자 필터 없을 때: 날짜별로 그룹화되어 표시되는지 확인
   - 방문일자 필터 있을 때: 선택된 날짜의 이미지만 표시되는지 확인
   - 이미지 탭에서 정상 작동하는지 확인

## 주의사항

1. **기능 손실**
   - "타입별" 보기 기능이 제거됨
   - 사용자가 타입별로 그룹화하여 보고 싶을 때 불편할 수 있음
   - 필요시 나중에 다시 추가 가능

2. **하위 호환성**
   - 기존 코드에서 `viewMode`를 사용하는 부분이 있는지 확인 필요
   - 다른 컴포넌트에서 참조하는지 확인 필요

3. **사용자 피드백**
   - 버튼 제거 후 사용자 피드백 수집
   - 필요시 "타입별" 보기 기능만 다시 추가 고려
