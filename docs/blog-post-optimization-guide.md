# 📝 블로그 포스트 최적화 가이드

## 개요

이 문서는 블로그 포스트 최적화 작업의 전체 프로세스를 문서화한 것입니다. 강석 글(ID 123)을 기준으로 작성되었으며, 다른 블로그 포스트에도 동일한 프로세스를 적용할 수 있습니다.

---

## 🎯 최적화 목표

1. **이미지 중복 제거**: 갤러리와 블로그 글의 이미지 일치성 확보
2. **콘텐츠 정제**: 과도한 키워드 반복 제거, 자연스러운 문장 구성
3. **이미지 배치 최적화**: 글 중간중간에 이미지를 적절히 배치하여 가독성 향상
4. **메타데이터 완성**: 모든 이미지에 ALT 텍스트, 제목, 설명, 키워드 추가

---

## 📋 작업 체크리스트

### Phase 1: 현황 분석

- [ ] 블로그 글의 이미지 URL 추출 (featured_image + content)
- [ ] 갤러리 폴더의 이미지 목록 확인
- [ ] 이미지 개수 비교 (블로그 vs 갤러리)
- [ ] 중복 이미지 URL 식별
- [ ] Storage에 없는 이미지 확인

### Phase 2: 중복 이미지 제거

- [ ] 블로그 글에서 중복된 이미지 URL 제거
- [ ] 갤러리에서 사용되지 않는 중복 이미지 삭제
- [ ] 블로그 글의 이미지 URL 업데이트 (삭제된 이미지 → 유지 이미지)

### Phase 3: 콘텐츠 정제

- [ ] **제목 표현 개선**
  - 콜론(`:`) 사용 지양: "Mas9Popup: 제목" → "Mas9Popup - 제목" 또는 "Mas9Popup | 제목"
  - 브랜드명이 포함된 경우 하이픈(`-`) 또는 파이프(`|`) 사용 권장
  - 제목에서 브랜드명 제거 후 본문에만 포함하는 것도 가능
- [ ] 과도한 키워드 반복 제거 (예: "고반발드라이버 추천 - 드라이버추천 추천 - 골프드라이버 추천 - 비거리향상 추천")
- [ ] 자연스러운 문장으로 수정
- [ ] 중복 제목 제거
  - 마크다운 제목(# ## ###)과 원본 제목의 중복 제거
  - **내용 상단 타이틀과 원본 제목의 중복 제거** (예: 제목 "마쓰구골프 드라이버를 사용하는 세계적인 골프지도자 김구식 선생님을 소개합니다."와 내용 상단 "세계적인 골프지도자 김구식 선생님 소개 - 고반발드라이버 비거리향상 추천" 중복 제거)
  - 유사도 40% 이상이고 핵심 키워드 3개 이상 매칭 시 제거
- [ ] 불필요한 마크다운 정리
- [ ] 하드코딩된 관련 포스트 섹션 제거 (API 기반 동적 관련 게시물 사용)
  - **용어 통일**: "관련 포스트" → "관련 게시물" (프론트엔드에서 "관련 게시물"로 표시)

### Phase 4: 이미지 배치 최적화

- [ ] 글의 논리적 흐름 파악
- [ ] 각 이미지를 적절한 위치에 배치
- [ ] 이미지와 텍스트의 연관성 확인
- [ ] 가독성 테스트
- [ ] 이미지/단락 비율 확인 (권장: 0.5-1.0, 즉 이미지 1개당 텍스트 단락 1-2개)
- [ ] **AI 이미지 생성 및 추가** (필요한 경우)
  - **⚠️ 중요**: 마쓰구 이미지 생성기 API 사용 필수 (`/api/kakao-content/generate-images`)
    - DALL-E 3 (`/api/generate-blog-image`) 사용 금지 (품질 문제)
    - 마쓰구 이미지 생성기는 FAL AI hidream-i1-dev 사용
    - 한국 골퍼 스펙 자동 적용 (50-70세, 한국인 외모)
    - 브랜딩 톤 자동 적용 (시니어 감성형/하이테크 혁신형)
    - 365일 통용 이미지 생성
  - 스크립트: `scripts/generate-masgolf-images-for-blog-302.js` 참고
  - 권장 위치: 본문 시작 부분 1장, 본문 중간 1장
  - 생성된 이미지는 갤러리로 이동 후 메타데이터 생성 필요

### Phase 5: 메타데이터 완성

- [ ] 모든 이미지에 ALT 텍스트 추가
- [ ] 모든 이미지에 제목 추가
- [ ] 모든 이미지에 설명 추가
- [ ] 모든 이미지에 키워드 추가 (블로그 주제 관련)
- [ ] 인물/연예인 관련 키워드 추가 (해당하는 경우: 예 - 이경영 글 → "이경영", "연예인", "배우" 키워드 추가)
- [ ] **메타데이터 생성 방법**: "일반 메타 생성" 사용 (골프 AI 생성 아님)
  - 이유: 블로그 이미지는 골프 관련이지만, 연령대 분석이나 골프 카테고리 자동 결정 같은 특화 기능이 필요 없음
  - ALT, Title, Description, Keywords만 있으면 충분
  - 더 빠르고 간단한 처리
- [ ] **이미지 이동 후 대기**: 이미지 이동 후 메타데이터 생성 전 최소 10초 대기 (Storage 안정화)

### Phase 6: 최종 검증

- [ ] 블로그 글 프리뷰 확인
- [ ] 이미지 표시 확인
- [ ] 메타데이터 표시 확인
- [ ] SEO 점수 확인

---

## 🔧 실행 스크립트

### 1. 현황 분석 스크립트

**파일**: `scripts/analyze-blog-gallery-images.js`

**사용법**: `node scripts/analyze-blog-gallery-images.js <blogPostId>`

**기능**:
- 블로그 글의 이미지 URL 추출
- 갤러리 폴더의 이미지 목록 확인
- 이미지 개수 비교
- 중복 이미지 URL 식별
- 블로그에만 있는 이미지 / 갤러리에만 있는 이미지 확인

### 2. 중복 이미지 제거 스크립트

**파일**: `scripts/remove-duplicate-blog-images.js`

**사용법**: `node scripts/remove-duplicate-blog-images.js <blogPostId>`

**기능**:
- 블로그 글에서 중복된 이미지 URL 제거
- 첫 번째 이미지는 유지, 나머지는 제거
- 데이터베이스 업데이트

### 3. 콘텐츠 정제 스크립트

**파일**: `scripts/refine-blog-content.js`

**사용법**: `node scripts/refine-blog-content.js <blogPostId>`

**기능**:
- 과도한 키워드 반복 제거
- 자연스러운 문장으로 수정
- 중복 제목 제거
  - 마크다운 제목(# ## ###)과 원본 제목의 중복 제거 (유사도 50% 이상)
  - 내용 상단 타이틀과 원본 제목의 중복 제거 (유사도 40% 이상, 핵심 키워드 3개 이상 매칭)
- 데이터베이스 업데이트

### 4. 이미지 배치 최적화 스크립트

**파일**: `scripts/optimize-image-placement.js`

**사용법**: `node scripts/optimize-image-placement.js <blogPostId>`

**기능**:
- 글을 단락으로 분리
- 이미지를 적절한 위치에 배치 (첫 번째 단락 다음, 3개 단락마다, 마지막 단락 전)
- 데이터베이스 업데이트

### 5. 하드코딩된 관련 포스트 제거 스크립트

**파일**: `scripts/remove-hardcoded-related-posts.js`

**사용법**: `node scripts/remove-hardcoded-related-posts.js <blogPostId>`

**기능**:
- content에서 하드코딩된 관련 포스트 섹션 제거
- API 기반 동적 관련 포스트만 사용하도록 정리
- 데이터베이스 업데이트

---

## 📝 강석 글(ID 123) 최적화 예시

### Before (최적화 전)

```
# 강석과 함께한 마쓰구골프 시타 체험 - 고반발드라이버 추천 - 드라이버추천 추천 - 골프드라이버 추천 - 비거리향상 추천

![골프 시타 현장](image1.webp)
![골프 시타 현장](image1.webp)  <!-- 중복 -->
![골프 스윙](image2.webp)
![골프 장비](image3.webp)
![골프 장비](image3.webp)  <!-- 중복 -->
```

### After (최적화 후)

```
# 강석과 함께한 마쓰구골프 시타 체험

MBC 표준FM의 싱글벙글쇼 MC 강석님을 알고 계신가요? 그의 목소리는 익숙하지만 실제 모습은 낯선 분들이 많을 것입니다. 최근 강석님께서 마쓰구골프 시타 현장에 방문하셨습니다.

![골프 시타 현장](image1.webp)

마쓰구골프는 모든 제품을 시타해보고 구매할 수 있는 곳으로, 다양한 스펙의 샤프트와 헤드 페이스 두께를 제공하는 것이 큰 특징입니다.

![골프 스윙](image2.webp)

강석님께서 스윙한 드라이버는 마쓰구골프의 시크리트웨폰 모델로, 현재 모델 중 가장 반발력이 높은 제품입니다.

![골프 장비](image3.webp)
```

---

## 🎯 최적화 원칙

1. **이미지 중복 제거**: 같은 이미지가 여러 번 사용되면 첫 번째만 유지
2. **자연스러운 키워드 사용**: 과도한 키워드 반복은 SEO에 오히려 해로움
3. **이미지와 텍스트의 연관성**: 이미지는 관련 텍스트 근처에 배치
4. **가독성 우선**: 이미지가 너무 많으면 오히려 가독성이 떨어짐
5. **메타데이터 완성**: 모든 이미지에 의미있는 ALT 텍스트, 제목, 설명, 키워드 추가
6. **이미지/단락 비율**: 권장 비율은 0.5-1.0 (이미지 1개당 텍스트 단락 1-2개)
   - **적절한 비율 (0.5-1.0)**: 이미지와 텍스트가 균형있게 배치됨
   - **이미지가 너무 많으면 (비율 > 1.5)**: 텍스트 단락을 더 추가하거나 이미지를 줄이기
   - **이미지가 너무 적으면 (비율 < 0.3)**: 관련 이미지를 추가하거나 텍스트를 줄이기
   - **강석 글 예시**: 이미지 6개, 단락 9개 → 비율 0.67 (적절)
7. **태그는 선택사항**: 태그가 없어도 SEO에는 영향 없음 (meta_keywords 필드 사용)
   - 태그가 있으면 화면에 표시, 없으면 표시하지 않음
   - SEO 메타 태그는 `meta_keywords` 필드를 우선 사용
8. **관련 포스트는 동적**: 하드코딩된 관련 포스트 링크 제거, API 기반 동적 관련 포스트만 사용
   - 마이그레이션 전에는 하드코딩된 링크가 content에 포함되어 있을 수 있음
   - 모든 블로그 마이그레이션 완료 후 관련 포스트 섹션이 정상 작동함

---

## 📚 참고 문서

- [블로그 단락 분할 및 이미지 배치 가이드](./blog-paragraph-splitting-and-image-placement-guide.md)
- [블로그 이미지 마이그레이션 및 정리 계획](./blog-image-migration-and-cleanup-plan.md)
- [이미지 메타데이터 가이드](./image-metadata-filename-guide.md)
- [갤러리 시스템 가이드](./gallery-complete-system-guide.md)

---

## 🔄 다른 블로그 포스트에 적용하기

### 방법 1: 통합 스크립트 사용 (권장)

```bash
node scripts/optimize-blog-post-complete.js <blogPostId>
```

이 스크립트는 다음 단계를 자동으로 실행합니다:
1. 현황 분석
2. 하드코딩된 관련 포스트 제거 (관련 게시물로 대체)
3. 태그 섹션 제거
4. 중복 이미지 제거
5. 콘텐츠 정제 (과도한 키워드, 중복 제목 제거)
6. 누락된 이미지 복구
7. 텍스트 단락 개선
8. 이미지 배치 최적화
9. 최종 검증

### 제목 표현 개선 가이드

**문제가 있는 제목:**
- `Mas9Popup: 살다보면 한두번은 비공인 드라이버가 꼭 필요해져요`

**개선된 제목:**
- `Mas9Popup - 살다보면 한두번은 비공인 드라이버가 꼭 필요해져요` (하이픈 사용) ✅
- `Mas9Popup | 살다보면 한두번은 비공인 드라이버가 꼭 필요해져요` (파이프 사용)
- 또는 브랜드명 제거: `살다보면 한두번은 비공인 드라이버가 꼭 필요해져요`

**스크립트:**
```bash
# 제목 수정 (수동 또는 스크립트)
node scripts/fix-blog-302-title-and-content.js  # 예시
```

### AI 이미지 생성 및 추가

1. **이미지 생성**: `/admin/ai-image-generator`에서 2-3장 생성
2. **이미지 위치**: 
   - 본문 시작 부분 1장
   - 본문 중간 1장
   - 본문 끝 부분 1장 (선택)
3. **이미지 처리**:
   - 생성된 이미지를 갤러리로 이동
   - 메타데이터 생성 (일반 메타 생성 사용)
   - 콘텐츠에 이미지 추가

### 방법 2: 단계별 실행

1. **현황 분석**: `node scripts/analyze-blog-gallery-images.js <blogPostId>`
2. **중복 제거**: `node scripts/remove-duplicate-blog-images.js <blogPostId>`
3. **콘텐츠 정제**: `node scripts/refine-blog-content.js <blogPostId>`
4. **하드코딩된 관련 포스트 제거**: `node scripts/remove-hardcoded-related-posts.js <blogPostId>`
5. **태그 섹션 제거**: `node scripts/remove-tags-section-from-content.js <blogPostId>`
6. **누락된 이미지 복구**: `node scripts/restore-missing-images-to-content.js <blogPostId>`
7. **텍스트 단락 개선**: `node scripts/improve-paragraph-splitting.js <blogPostId>`
8. **이미지 배치**: `node scripts/optimize-image-placement.js <blogPostId>`
9. **메타데이터 생성**: 갤러리에서 이미지 선택 → 메타데이터 편집

---

## ✅ 완료 기준

- [ ] 블로그 글의 이미지 개수 = 갤러리 이미지 개수
- [ ] 블로그 글 내 중복 이미지 0개
- [ ] 과도한 키워드 반복 제거 완료
- [ ] 하드코딩된 관련 포스트 섹션 제거 완료
- [ ] 이미지가 글 중간중간에 적절히 배치됨
- [ ] 이미지/단락 비율이 적절함 (0.5-1.0 권장)
- [ ] 모든 이미지에 메타데이터 완성 (ALT, 제목, 설명, 키워드)
- [ ] 태그는 선택사항 (있으면 표시, 없어도 문제없음)

---

## 📊 이미지/단락 비율 가이드라인

### 비율 계산 방법

```
이미지/단락 비율 = 이미지 개수 / 텍스트 단락 개수
```

### 권장 비율

- **0.5-1.0**: 적절한 비율 (권장) ✅
  - 이미지와 텍스트가 균형있게 배치됨
  - 가독성이 좋고 시각적 흥미 유지
  - 예: 이미지 6개, 단락 7개 → 비율 0.86 ✅

- **> 1.5**: 이미지가 너무 많음 ⚠️
  - 텍스트 단락을 더 추가하거나
  - 불필요한 이미지를 제거
  - 예: 이미지 10개, 단락 5개 → 비율 2.0 ⚠️

- **< 0.3**: 이미지가 너무 적음 ⚠️
  - 관련 이미지를 추가하거나
  - 텍스트를 줄이기
  - 예: 이미지 1개, 단락 10개 → 비율 0.1 ⚠️

### 강석 글(ID 123) 최종 분석 결과

- **이미지 개수**: 6개 (featured_image 1개 + content 6개)
- **텍스트 단락 개수**: 7개
- **이미지/단락 비율**: 0.86 ✅ (적절)
- **결론**: 이미지와 텍스트가 균형있게 배치되어 있음. 추가 조정 불필요.

### 이미지가 많을 경우 대응 방법

**질문**: 이미지가 많을 경우 글을 나눠야 하나? 일부러 글을 몰아넣은 건가?

**답변**:
1. **이미지/단락 비율 확인**: 비율이 0.5-1.0 범위면 적절함
2. **비율이 > 1.5인 경우**:
   - 각 이미지에 대한 설명 텍스트 추가
   - 이미지를 그룹화하여 설명 (예: "골프 클럽 진열", "스윙 동작" 등)
   - 불필요한 중복 이미지 제거
3. **글을 나눌 필요는 없음**: 이미지가 많아도 텍스트 단락이 충분하면 가독성 유지 가능
4. **강석 글의 경우**: 비율 0.86으로 적절하므로 추가 조정 불필요

---

**작성일**: 2025-11-29  
**최종 수정일**: 2025-11-29  
**작성자**: AI Assistant

