# 고객 이미지 파일명 형식 규칙

## 📋 개요

고객 이미지 파일명은 일관성 있고 의미 있는 형식을 따릅니다.

## 📝 파일명 형식

### 형식
```
{영문이름}_s{장면코드}_{타입}_{번호}.webp
```

### 예시
- `joseotdae_s6_signature_01.webp` - 조성대의 사인 이미지 (장면 6)
- `joseotdae_s3_swing-scene_01.webp` - 조성대의 시타장면 이미지 (장면 3)
- `joseotdae_s4_swing-consultation_01.webp` - 조성대의 시타상담 이미지 (장면 4)

## 🔧 구성 요소

### 1. 영문 이름 (영문이름)
- 고객의 한글 이름을 영문으로 변환한 값
- 하이픈과 공백 제거, 소문자 변환
- 예: `조성대` → `joseotdae`
- 예: `장진수` → `jangjinsu`

### 2. 장면 코드 (s{장면코드})
- 스토리보드의 장면 번호 (1-7)
- `s1`: 행복한 주인공
- `s2`: 행복+불안 전조
- `s3`: 문제 발생 (시타장면, 시타영상)
- `s4`: 가이드 만남 (시타상담, 측정)
- `s5`: 가이드 장소 (아트월)
- `s6`: 성공 회복 (사인, 스윙장면, 스윙영상)
- `s7`: 여운 정적 (후기캡처)

### 3. 타입 ({타입})
- 이미지의 종류를 나타내는 영문 식별자
- 예: `signature`, `swing-scene`, `swing-consultation`, `art-wall`, `hero`, `review-capture` 등
- 원본 파일명에서 자동 추출되거나, 한글을 영문으로 변환

### 4. 번호 ({번호})
- 같은 장면, 같은 타입의 이미지 순서
- 2자리 숫자 (01, 02, 03, ...)
- 예: `01`, `02`, `03`

### 5. 확장자 (.webp)
- 모든 이미지는 WebP 형식으로 변환되어 저장
- 동영상은 원본 형식 유지 (`.mp4`, `.mov` 등)

## 📂 파일 위치

고객 이미지는 다음 경로에 저장됩니다:

```
originals/customers/{영문이름}-{전화번호마지막4자리}/{방문일자}/{파일명}
```

예:
```
originals/customers/joseotdae-7010/2023-06-20/joseotdae_s6_signature_01.webp
```

## 🔄 변경 이력

### 2026-01-16: 파일명 형식 변경
- **이전**: `{이니셜}_s{장면코드}_{타입}_{번호}.webp` (예: `j_s6_signature_01.webp`)
- **현재**: `{영문이름}_s{장면코드}_{타입}_{번호}.webp` (예: `joseotdae_s6_signature_01.webp`)
- **이유**: 파일명의 가독성과 식별성 향상

## ⚙️ 구현 위치

- **파일명 생성 함수**: `lib/customer-image-filename-generator.ts`
- **사용 위치**: `pages/admin/customers/index.tsx` (고객 이미지 업로드)

## 📌 중요 사항

1. **일관성 유지**: 모든 고객 이미지는 이 형식을 따라야 합니다.
2. **자동 생성**: 파일명은 업로드 시 자동으로 생성됩니다.
3. **메타데이터 연동**: 파일명의 장면 코드와 타입은 `image_metadata` 테이블의 `story_scene`과 `image_type` 컬럼과 연동됩니다.
4. **기존 파일**: 기존에 `{이니셜}` 형식으로 저장된 파일은 그대로 유지되며, 새로 업로드되는 파일만 새 형식을 사용합니다.

## 🔍 관련 문서

- [고객 스토리보드 관리 시스템](./customer-storyboard-plan.md)
- [이미지 메타데이터 가이드](./image-metadata-filename-guide.md)
