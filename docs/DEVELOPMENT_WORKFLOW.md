# 개발 워크플로우 가이드

## 🚀 빠른 시작

### 자동화된 서버 재시작

코드 수정 후 서버를 재시작해야 할 때:

```bash
# 방법 1: npm 스크립트 사용 (권장)
npm run restart

# 방법 2: 스크립트 직접 실행
./scripts/restart-dev.sh
```

이 스크립트는 다음을 자동으로 수행합니다:
1. 기존 서버 프로세스 종료
2. 빌드 실행
3. 서버 시작
4. 서버 상태 확인

### 일반적인 개발 워크플로우

#### 1. 코드 수정 후 (빌드 캐시 문제 없을 때)
```bash
# 서버가 이미 실행 중이면 자동으로 핫 리로드됨
# 별도 작업 불필요
```

#### 2. 빌드 에러 발생 시
```bash
# .next 폴더 삭제 후 재빌드
npm run clean:build

# 또는 개발 서버만 재시작
npm run dev:clean
```

#### 3. 모듈을 찾을 수 없다는 에러 발생 시
```bash
# 완전 재시작 (권장)
npm run restart
```

## 🔧 문제 해결

### "Cannot find module" 에러

이 에러는 보통 다음과 같은 경우에 발생합니다:
- `.next` 폴더가 손상됨
- 빌드가 완전히 완료되지 않음
- 서버가 제대로 재시작되지 않음

**해결 방법:**
```bash
# 1. 서버 종료
pkill -f "next dev"

# 2. .next 폴더 삭제
rm -rf .next

# 3. 재빌드 및 재시작
npm run restart
```

### 자동 재시작이 필요한 경우

다음과 같은 경우에는 수동으로 재시작이 필요합니다:

1. **환경 변수 변경** (`.env.local` 수정)
2. **새로운 패키지 설치** (`npm install` 후)
3. **Next.js 설정 변경** (`next.config.js` 수정)
4. **API 라우트 구조 변경**
5. **빌드 에러 발생**

### 자동 재시작이 불필요한 경우

다음과 같은 경우에는 자동으로 핫 리로드됩니다:

1. **컴포넌트 코드 수정** (`.tsx`, `.ts` 파일)
2. **스타일 변경** (CSS, Tailwind)
3. **일반적인 로직 수정**

## 📝 개발 팁

### 1. 개발 서버 모니터링

터미널에서 서버 로그를 확인하려면:
```bash
# 백그라운드 실행 대신 포그라운드 실행
npm run dev
```

### 2. 빌드 캐시 관리

빌드 문제가 지속되면:
```bash
# .next 폴더와 node_modules 캐시 삭제
rm -rf .next
rm -rf node_modules/.cache
npm run build
```

### 3. 포트 충돌 해결

포트 3000이 이미 사용 중일 때:
```bash
# 포트를 사용하는 프로세스 찾기
lsof -ti:3000

# 프로세스 종료
kill -9 $(lsof -ti:3000)
```

## 🎯 권장 워크플로우

### 일상적인 개발
1. 코드 수정
2. 브라우저에서 자동 리로드 확인
3. 문제 없으면 계속 개발

### 에러 발생 시
1. 브라우저 콘솔 확인
2. 터미널 에러 메시지 확인
3. `npm run restart` 실행
4. 여전히 문제가 있으면 `.next` 폴더 삭제 후 재시작

### 배포 전
1. `npm run build` 실행하여 빌드 에러 확인
2. 모든 기능 테스트
3. 배포 진행

## ⚡ 빠른 명령어 참조

```bash
# 개발 서버 시작
npm run dev

# 빌드만 실행
npm run build

# 빌드 캐시 삭제 후 빌드
npm run clean:build

# 완전 재시작 (서버 종료 → 빌드 → 시작)
npm run restart

# 개발 서버 (캐시 삭제 후)
npm run dev:clean
```


